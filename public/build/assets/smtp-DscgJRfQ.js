import{r as u,j as e,H as O,F as G,a as $}from"./app-BW3HAIL3.js";import{q as P}from"./wayfinder-FFrBTblC.js";import{a as K,S as W,H as q}from"./layout-BkykqnEr.js";import{I as f}from"./input-error-DmshzmA8.js";import{u as I,c as F,B as H}from"./index-B4WjwWAD.js";import{I as x}from"./input-CobfSMRz.js";import{L as h}from"./label-BNq7UXsG.js";import{S as X,a as J,b as Y,c as Z,d as _}from"./select-MfTrULb_.js";import{u as ee,c as te,a as re,b as ae,d as se}from"./index-DQkmOt2f.js";import{P as M}from"./index-DDVwAWNd.js";import{A as oe}from"./app-layout-DrRYXlj3.js";import{M as ie}from"./mail-BTof57mT.js";import{S as ne}from"./send-DldT0M_L.js";import"./app-DcQRxmrv.js";import"./heading-DFxr5nDh.js";import"./index-CGinIBRf.js";import"./app-header-H-kh1hk5.js";import"./createLucideIcon-DXDgOfkY.js";import"./index-YEfPdCwI.js";import"./lock-DLNoSTzS.js";import"./shield-BGTLTtUs.js";import"./music-DLw9wCxy.js";import"./index-CcE2XHjo.js";import"./check-DhaNvmhh.js";import"./toaster-BAl5yLdu.js";const s=t=>({url:s.url(t),method:"get"});s.definition={methods:["get","head"],url:"/settings/smtp"};s.url=t=>s.definition.url+P(t);s.get=t=>({url:s.url(t),method:"get"});s.head=t=>({url:s.url(t),method:"head"});const E=t=>({action:s.url(t),method:"get"});E.get=t=>({action:s.url(t),method:"get"});E.head=t=>({action:s.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});s.form=E;const l=t=>({url:l.url(t),method:"patch"});l.definition={methods:["patch"],url:"/settings/smtp"};l.url=t=>l.definition.url+P(t);l.patch=t=>({url:l.url(t),method:"patch"});const R=t=>({action:l.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});R.patch=t=>({action:l.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});l.form=R;const p=t=>({url:p.url(t),method:"post"});p.definition={methods:["post"],url:"/settings/smtp/test"};p.url=t=>p.definition.url+P(t);p.post=t=>({url:p.url(t),method:"post"});const A=t=>({action:p.url(t),method:"post"});A.post=t=>({action:p.url(t),method:"post"});p.form=A;const ce={update:l};var N="Switch",[le,Ue]=te(N),[de,me]=le(N),B=u.forwardRef((t,a)=>{const{__scopeSwitch:o,name:d,checked:i,defaultChecked:j,required:n,disabled:r,value:c="on",onCheckedChange:m,form:g,...w}=t,[v,b]=u.useState(null),k=I(a,S=>b(S)),C=u.useRef(!1),T=v?g||!!v.closest("form"):!0,[y,z]=ee({prop:i,defaultProp:j??!1,onChange:m,caller:N});return e.jsxs(de,{scope:o,checked:y,disabled:r,children:[e.jsx(M.button,{type:"button",role:"switch","aria-checked":y,"aria-required":n,"data-state":U(y),"data-disabled":r?"":void 0,disabled:r,value:c,...w,ref:k,onClick:re(t.onClick,S=>{z(D=>!D),T&&(C.current=S.isPropagationStopped(),C.current||S.stopPropagation())})}),T&&e.jsx(V,{control:v,bubbles:!C.current,name:d,value:c,checked:y,required:n,disabled:r,form:g,style:{transform:"translateX(-100%)"}})]})});B.displayName=N;var Q="SwitchThumb",L=u.forwardRef((t,a)=>{const{__scopeSwitch:o,...d}=t,i=me(Q,o);return e.jsx(M.span,{"data-state":U(i.checked),"data-disabled":i.disabled?"":void 0,...d,ref:a})});L.displayName=Q;var ue="SwitchBubbleInput",V=u.forwardRef(({__scopeSwitch:t,control:a,checked:o,bubbles:d=!0,...i},j)=>{const n=u.useRef(null),r=I(n,j),c=ae(o),m=se(a);return u.useEffect(()=>{const g=n.current;if(!g)return;const w=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(w,"checked").set;if(c!==o&&b){const k=new Event("click",{bubbles:d});b.call(g,o),g.dispatchEvent(k)}},[c,o,d]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...i,tabIndex:-1,ref:r,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});V.displayName=ue;function U(t){return t?"checked":"unchecked"}var pe=B,he=L;function fe({className:t,...a}){return e.jsx(pe,{"data-slot":"switch",className:F("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(he,{"data-slot":"switch-thumb",className:F("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const xe=[{title:"Configuración SMTP",href:K().url}];function ze({smtpSetting:t}){const[a,o]=u.useState(""),[d,i]=u.useState(!1),j=()=>{a&&(i(!0),$.post("/settings/smtp/test",{email:a},{onFinish:()=>i(!1)}))};return e.jsxs(oe,{breadcrumbs:xe,children:[e.jsx(O,{title:"Configuración SMTP"}),e.jsx(W,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(q,{title:"Servidor SMTP",description:"Configura el servidor SMTP para enviar correos electrónicos desde la aplicación"}),e.jsx(G,{...ce.update.form(),options:{preserveScroll:!0},className:"space-y-6",children:({processing:n,errors:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"host",children:"Host del servidor SMTP"}),e.jsx(x,{id:"host",name:"host",type:"text",className:"mt-1 block w-full",defaultValue:t?.host??"",placeholder:"smtp.gmail.com",required:!0}),e.jsx(f,{className:"mt-2",message:r.host})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"port",children:"Puerto"}),e.jsx(x,{id:"port",name:"port",type:"number",className:"mt-1 block w-full",defaultValue:t?.port??587,placeholder:"587",required:!0}),e.jsx(f,{className:"mt-2",message:r.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"encryption",children:"Encriptación"}),e.jsx("input",{type:"hidden",name:"encryption",value:t?.encryption??"tls"}),e.jsxs(X,{defaultValue:t?.encryption??"tls",onValueChange:c=>{const m=document.querySelector('input[name="encryption"]');m&&(m.value=c==="none"?"":c)},children:[e.jsx(J,{className:"w-full",children:e.jsx(Y,{placeholder:"Seleccionar encriptación"})}),e.jsxs(Z,{children:[e.jsx(_,{value:"tls",children:"TLS"}),e.jsx(_,{value:"ssl",children:"SSL"}),e.jsx(_,{value:"none",children:"Ninguna"})]})]}),e.jsx(f,{className:"mt-2",message:r.encryption})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"username",children:"Usuario / Correo"}),e.jsx(x,{id:"username",name:"username",type:"text",className:"mt-1 block w-full",defaultValue:t?.username??"",placeholder:"usuario@dominio.com"}),e.jsx(f,{className:"mt-2",message:r.username})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"password",children:"Contraseña"}),e.jsx(x,{id:"password",name:"password",type:"password",className:"mt-1 block w-full",placeholder:"••••••••"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Deja en blanco para mantener la contraseña actual"}),e.jsx(f,{className:"mt-2",message:r.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"from_address",children:"Correo de remitente"}),e.jsx(x,{id:"from_address",name:"from_address",type:"email",className:"mt-1 block w-full",defaultValue:t?.from_address??"",placeholder:"noreply@dominio.com",required:!0}),e.jsx(f,{className:"mt-2",message:r.from_address})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"from_name",children:"Nombre de remitente"}),e.jsx(x,{id:"from_name",name:"from_name",type:"text",className:"mt-1 block w-full",defaultValue:t?.from_name??"",placeholder:"KAIROS",required:!0}),e.jsx(f,{className:"mt-2",message:r.from_name})]}),e.jsx("input",{type:"hidden",name:"is_active",value:t?.is_active?"1":"0"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{htmlFor:"is_active",children:"Configuración activa"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Habilita esta configuración para enviar correos"})]}),e.jsx(fe,{id:"is_active",defaultChecked:t?.is_active??!0,onCheckedChange:c=>{const m=document.querySelector('input[name="is_active"]');m&&(m.value=c?"1":"0")}})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(H,{type:"submit",disabled:n,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),n?"Guardando...":"Guardar Configuración"]})})]})}),t&&e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsx(q,{title:"Probar configuración",description:"Envía un correo de prueba para verificar que la configuración funciona correctamente"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{type:"email",placeholder:"correo@ejemplo.com",value:a,onChange:n=>o(n.target.value),className:"max-w-sm"}),e.jsxs(H,{type:"button",variant:"outline",onClick:j,disabled:!a||d,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),d?"Enviando...":"Enviar Prueba"]})]})]})]})})]})}export{ze as default};
