import{r as N,j as e,H as C,a as w}from"./app-_rOQn_46.js";import{C as h,b as p,c as b,d as j,a as f}from"./card-BBOBQJet.js";import{B as P}from"./button-Cwjg0RKq.js";import{T as y}from"./toaster-DF114ULM.js";import{c as u}from"./utils-CHYGzkwl.js";import{C as S}from"./credit-card-CtYZ3YyT.js";import{S as E}from"./shield-check-B8uq5oOl.js";import{B as M}from"./banknote-DRRJIocp.js";import{P as A}from"./phone-CL7CjGQe.js";import{C as R}from"./clock-92yNzH6p.js";/* empty css            */import"./index-HbNiKBAr.js";import"./index-LDKjRhno.js";import"./createLucideIcon-BTUecZaa.js";function T({publicKey:s,amountInCents:l,reference:i,currency:n="COP",redirectUrl:o,customerEmail:g,customerName:a,integritySignature:c}){const d=N.useRef(null),x=(r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?r:(console.warn("‚ö†Ô∏è Email inv√°lido detectado:",r),"noreply@academialinaje.com"))(g),m=s.startsWith("pub_test_");return N.useEffect(()=>{if(console.log("üîÑ Datos actualizados:",{publicKey:s,amountInCents:l,reference:i,currency:n,redirectUrl:o,customerEmail:g,customerName:a,integritySignature:c}),!d.current)return;const r=document.createElement("script");return r.src="https://checkout.wompi.co/widget.js",r.setAttribute("data-render","button"),r.setAttribute("data-public-key",s),r.setAttribute("data-currency",n),r.setAttribute("data-amount-in-cents",l.toString()),r.setAttribute("data-reference",i),r.setAttribute("data-redirect-url",o),r.setAttribute("data-customer-data:email",x),r.setAttribute("data-customer-data:full-name",a),c&&!m?(r.setAttribute("data-signature:integrity",c),console.log("üîê Modo PRODUCCI√ìN - Firma de integridad incluida")):m&&console.log("üß™ Modo TEST - Sin firma de integridad (opcional en sandbox)"),d.current.appendChild(r),r.onload=()=>{console.log("‚úÖ Script de Wompi cargado exitosamente"),setTimeout(()=>{const t=d.current?.querySelector("button");t?(console.log("üöÄ Abriendo widget de pago autom√°ticamente..."),t.click()):console.warn("‚ö†Ô∏è No se encontr√≥ el bot√≥n de Wompi")},1e3)},r.onerror=()=>{console.error("‚ùå Error al cargar el script de Wompi")},()=>{const t=d.current;if(t){const k=t.querySelector('script[src="https://checkout.wompi.co/widget.js"]');k&&t.removeChild(k)}}},[s,l,i,n,o,x,a,c,m]),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 dark:from-green-950/30 to-emerald-50 dark:to-emerald-950/30 border-2 border-green-200 dark:border-green-800 rounded-xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:"Pago Seguro con Wompi"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Haz clic en el bot√≥n de abajo para continuar"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["$",(l/100).toLocaleString("es-CO")," COP"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Referencia: ",i]})]})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("form",{ref:d})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Instrucciones de pago"}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:'‚Ä¢ Haz clic en el bot√≥n "Pagar con Wompi"'}),e.jsx("li",{children:"‚Ä¢ Se abrir√° una ventana segura de Wompi"}),e.jsx("li",{children:"‚Ä¢ Elige tu m√©todo de pago (tarjeta, PSE, Nequi, etc.)"}),e.jsx("li",{children:"‚Ä¢ Completa la informaci√≥n requerida"}),e.jsx("li",{children:"‚Ä¢ Al finalizar, recibir√°s confirmaci√≥n de tu pago"})]})]})]})})})]})}function G({payment:s,wompi_config:l,paymentMethods:i}){const n=i?.online??!0,o=i?.manual??!0,g=n&&!o?"online":!n&&o?"manual":null,[a,c]=N.useState(g),[d,v]=N.useState(!1),x=`${s.student.name} ${s.student.last_name}`,m=s.student.email||"noreply@academialinaje.com",r=Math.round(s.amount*100),t=()=>{v(!0),w.post(`/matricula/checkout/${s.id}/manual`,{},{onFinish:()=>v(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Pagar Matr√≠cula"}),e.jsx(y,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-muted to-background dark:from-neutral-950 dark:to-neutral-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Completar Matr√≠cula"}),e.jsx("p",{className:"text-muted-foreground",children:"Solo falta un paso para completar tu matr√≠cula"})]}),e.jsxs(h,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(b,{children:"Resumen de Pago"}),e.jsx(j,{children:"Revisa los detalles de tu matr√≠cula"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estudiante:"}),e.jsx("span",{className:"font-medium",children:x})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Programa:"}),e.jsx("span",{className:"font-medium",children:s.program.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Concepto:"}),e.jsx("span",{className:"font-medium",children:s.concept})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correo:"}),e.jsx("span",{className:"font-medium text-sm",children:m})]}),e.jsxs("div",{className:"flex justify-between py-3 bg-primary/5 px-4 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",s.amount.toLocaleString("es-CO")," COP"]})]})]})]}),e.jsxs(h,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(b,{children:"Elige tu m√©todo de pago"}),e.jsx(j,{children:"Selecciona c√≥mo deseas realizar el pago de tu matr√≠cula"})]}),e.jsx(f,{children:e.jsxs("div",{className:u("grid gap-4",n&&o?"grid-cols-1 sm:grid-cols-2":"grid-cols-1 max-w-md mx-auto"),children:[n&&e.jsxs("div",{onClick:()=>c("online"),className:u("p-5 border-2 rounded-xl cursor-pointer transition-all duration-200",a==="online"?"border-amber-500 bg-amber-50 dark:bg-amber-950/30 shadow-md ring-1 ring-amber-500/20":"border-border hover:border-amber-300 dark:hover:border-amber-700 hover:bg-amber-50/50"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:u("p-2.5 rounded-full",a==="online"?"bg-amber-500 text-white":"bg-muted text-muted-foreground"),children:e.jsx(S,{className:"h-5 w-5"})}),e.jsx("span",{className:"font-semibold text-foreground",children:"Pago en L√≠nea"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Paga de forma segura con tarjeta de cr√©dito, d√©bito, PSE o Nequi."}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(E,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Pago seguro con Wompi"})]})]}),o&&e.jsxs("div",{onClick:()=>c("manual"),className:u("p-5 border-2 rounded-xl cursor-pointer transition-all duration-200",a==="manual"?"border-green-500 bg-green-50 dark:bg-green-950/30 shadow-md ring-1 ring-green-500/20":"border-border hover:border-green-300 dark:hover:border-green-700 hover:bg-green-50/50"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:u("p-2.5 rounded-full",a==="manual"?"bg-green-500 text-white":"bg-muted text-muted-foreground"),children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("span",{className:"font-semibold text-foreground",children:"Pago Manual"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Paga por transferencia bancaria o en efectivo. Un asesor te contactar√°."}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(A,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Te contactaremos para coordinar"})]})]})]})})]}),a==="online"&&e.jsxs(h,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(b,{children:"Proceder al Pago"}),e.jsx(j,{children:"Completa tu pago de forma segura con Wompi"})]}),e.jsx(f,{children:e.jsx(T,{publicKey:l.public_key,amountInCents:r,reference:s.wompi_reference,currency:"COP",redirectUrl:window.location.origin+"/matricula/confirmacion",customerEmail:m,customerName:x,integritySignature:l.integrity_signature})}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"M√©todos aceptados"}),e.jsxs("div",{className:"flex justify-center gap-3 items-center mt-2 opacity-60",children:[e.jsx("div",{className:"text-xs font-semibold bg-card px-3 py-1 rounded border",children:"VISA"}),e.jsx("div",{className:"text-xs font-semibold bg-card px-3 py-1 rounded border",children:"MASTERCARD"}),e.jsx("div",{className:"text-xs font-semibold bg-card px-3 py-1 rounded border",children:"PSE"})]})]})]}),a==="manual"&&e.jsxs(h,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(b,{children:"Pago Manual"}),e.jsx(j,{children:"Confirma tu matr√≠cula y un asesor se comunicar√° contigo"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"¬øC√≥mo funciona?"}),e.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-300 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Tu matr√≠cula quedar√° registrada como pendiente de pago"}),e.jsx("li",{children:"Un asesor te contactar√° para coordinar el pago"}),e.jsx("li",{children:"Podr√°s pagar por transferencia bancaria o en efectivo"})]})]})]})}),e.jsx(P,{onClick:t,disabled:d,className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",children:d?"Procesando...":"Confirmar Pago Manual"})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-primary hover:underline",children:"Cont√°ctanos"})]})})]})})]})}export{G as default};
