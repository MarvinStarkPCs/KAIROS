import{r as g,j as e,H as f}from"./app-BX_bxR2y.js";import{C as d,a as m,b as u,c as x,d as p}from"./card-U0mJXpS1.js";import{L as v}from"./loader-circle-Dkryhwl8.js";import"./app-dy3UidUM.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-DpRMW4-5.js";function k({payment:a,wompiPublicKey:c,redirectUrl:n,amountInCents:i,integritySignature:o}){g.useEffect(()=>{if(!a.wompi_reference){console.error("Error: wompi_reference no est√° presente en el pago",a);return}const t=document.createElement("script");t.src="https://checkout.wompi.co/widget.js",t.async=!0,t.setAttribute("data-render","button"),t.setAttribute("data-public-key",c),t.setAttribute("data-currency","COP"),t.setAttribute("data-amount-in-cents",i.toString()),t.setAttribute("data-reference",a.wompi_reference),o&&t.setAttribute("data-signature:integrity",o),t.setAttribute("data-redirect-url",n);const b=a.student.email||"noreply@academialinaje.com";t.setAttribute("data-customer-data:email",b),t.setAttribute("data-customer-data:full-name",`${a.student.name} ${a.student.last_name}`),t.setAttribute("data-acceptance-token","true"),t.setAttribute("data-payment-methods-enabled","CARD"),t.onload=()=>{console.log("Wompi widget cargado");const l=setInterval(()=>{let s=document.querySelector('form[action*="checkout.wompi"] button');s||(s=document.querySelector('button[type="submit"]')),s||(s=document.querySelector("#wompi-widget button")),s||(s=document.querySelector('[class*="wompi"] button')),s&&(clearInterval(l),console.log("Bot√≥n de Wompi encontrado:",s),console.log("Haciendo click autom√°tico..."),s.click(),setTimeout(()=>{const h=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(h)},100))},200);setTimeout(()=>{clearInterval(l),console.log("Timeout alcanzado, intentando una √∫ltima vez...");const s=document.querySelector("#wompi-widget button");s&&s.click()},3e3)};const r=document.getElementById("wompi-widget");return r&&r.appendChild(t),()=>{r&&t.parentNode===r&&r.removeChild(t)}},[a,c,n,i,o]);const j=a.student.email;return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Pagar Matr√≠cula"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Completar Matr√≠cula"}),e.jsx("p",{className:"text-gray-600",children:"Solo falta un paso para completar tu matr√≠cula"})]}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:"Resumen de Pago"}),e.jsx(x,{children:"Revisa los detalles de tu matr√≠cula"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Estudiante:"}),e.jsxs("span",{className:"font-medium",children:[a.student.name," ",a.student.last_name]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Programa:"}),e.jsx("span",{className:"font-medium",children:a.program.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Concepto:"}),e.jsx("span",{className:"font-medium",children:a.concept})]}),e.jsxs("div",{className:"flex justify-between py-3 bg-gray-50 px-4 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",a.amount.toLocaleString("es-CO")," COP"]})]})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(u,{children:"Pago con Tarjeta"}),e.jsx(x,{children:"Ingresa los datos de tu tarjeta de cr√©dito o d√©bito"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"üí≥ Pago Autom√°tico con Tarjeta:"})," Al registrar tu tarjeta de cr√©dito o d√©bito, se configurar√°n cobros mensuales autom√°ticos. Tu tarjeta se cargar√° autom√°ticamente cada mes sin necesidad de realizar el pago manualmente."]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Correo de notificaciones:"})," ",j]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recibir√°s la confirmaci√≥n de pago y facturas en este correo"})]}),e.jsx("div",{id:"wompi-widget",className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(v,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Abriendo pasarela de pago..."})]})}),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pago seguro procesado por Wompi"})]})})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-primary hover:underline",children:"Cont√°ctanos"})]})})]})})]})}export{k as default};
