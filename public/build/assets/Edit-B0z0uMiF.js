import{u as P,j as e,H as A,L as N}from"./app-DS3XsqEZ.js";import{B as u}from"./button-B1e-AMvH.js";import{I as t}from"./input-jSZpJp5c.js";import{L as l}from"./label-DVYcV-OP.js";import{T as j}from"./textarea-BJY9ziiv.js";import{C as z}from"./checkbox-Bw1KL3NY.js";import{S as _}from"./switch-CS2ng3v6.js";import{S as f,a as g,b as v,c as C,d as n}from"./select-DQASGuDx.js";import{C as c,b as h,c as m,a as p,d as y}from"./card-CSV1cHqY.js";import{s as d}from"./index-ikzcNs2d.js";import{A as B}from"./app-layout-jDJ60CM8.js";import{C as U}from"./chevron-left-Dpme-IKl.js";import{U as M}from"./user-CtpExs7Y.js";import{P as G}from"./phone-kQ3_nPtU.js";import{G as H}from"./graduation-cap-D6NhGYmE.js";import{H as V}from"./heart-D7HZhkp3.js";import{M as R}from"./music-dEukr9SM.js";/* empty css            */import"./utils-CXgVrZ_A.js";import"./index-C1zl3AKF.js";import"./index-BGLTVUfG.js";import"./index-CNXn2kmk.js";import"./index-SalYN_vT.js";import"./index-BSFzQkJ5.js";import"./check-DySNvAU8.js";import"./createLucideIcon-CDm0GSF8.js";import"./index-CbjShBpi.js";import"./app-header-B9YO6fFf.js";import"./chevron-right-BKj6_V_o.js";import"./index-DSW0ah-P.js";import"./index-CLa6oRL-.js";import"./wayfinder-Bf9OnZdi.js";import"./index-B3zDr7qY.js";import"./users-D0n3l_ee.js";import"./credit-card-CG29_pKq.js";import"./calendar-CU4UlK9S.js";import"./file-text-CqlDkYrG.js";import"./lock-pyde7PLs.js";import"./shield-CQP0rKaF.js";import"./loader-circle-BegcMASd.js";import"./mail-DPit2bkd.js";import"./toaster-B63BtNr_.js";function ke({user:a,roles:x,hasStudentRole:w,hasTeacherRole:F}){const{data:i,setData:r,put:S,processing:b,errors:o}=P({name:a.name||"",last_name:a.last_name||"",email:a.email||"",password:"",password_confirmation:"",roles:x.filter(s=>s.assigned).map(s=>s.id),document_type:a.document_type||"",document_number:a.document_number||"",birth_date:a.birth_date||"",birth_place:a.birth_place||"",gender:a.gender||"",phone:a.phone||"",mobile:a.mobile||"",address:a.address||"",neighborhood:a.neighborhood||"",city:a.city||"",department:a.department||"",student_profile:a.student_profile?{modality:a.student_profile.modality||"",desired_instrument:a.student_profile.desired_instrument||"",plays_instrument:a.student_profile.plays_instrument||!1,instruments_played:a.student_profile.instruments_played||"",has_music_studies:a.student_profile.has_music_studies||!1,music_schools:a.student_profile.music_schools||"",current_level:a.student_profile.current_level||1,emergency_contact_name:a.student_profile.emergency_contact_name||"",emergency_contact_phone:a.student_profile.emergency_contact_phone||"",medical_conditions:a.student_profile.medical_conditions||"",allergies:a.student_profile.allergies||""}:null,teacher_profile:a.teacher_profile?{instruments_played:a.teacher_profile.instruments_played||"",music_schools:a.teacher_profile.music_schools||"",experience_years:a.teacher_profile.experience_years||0,bio:a.teacher_profile.bio||"",specialization:a.teacher_profile.specialization||"",hourly_rate:a.teacher_profile.hourly_rate||0,is_active:a.teacher_profile.is_active??!0}:null}),T=s=>{s.preventDefault(),S(d("usuarios.update",a.id))},E=s=>{r("roles",i.roles.includes(s)?i.roles.filter(D=>D!==s):[...i.roles,s])},I=[{title:"Inicio",href:d("programas_academicos.index")},{title:"Usuarios",href:d("usuarios.index")},{title:`Editar: ${a.name}`,href:d("usuarios.edit",a.id)}],L=x.find(s=>s.name==="Estudiante"&&i.roles.includes(s.id)),k=x.find(s=>s.name==="Profesor"&&i.roles.includes(s.id));return e.jsxs(B,{breadcrumbs:I,children:[e.jsx(A,{title:`Editar Usuario: ${a.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6 bg-[#f9f6f2]",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{href:d("usuarios.index"),children:e.jsxs(u,{variant:"ghost",size:"sm",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Editar Usuario"}),e.jsxs("p",{className:"text-muted-foreground",children:["Actualiza los datos de ",e.jsx("strong",{children:a.name})]})]})]})}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Datos Basicos"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Nombre *"}),e.jsx(t,{id:"name",value:i.name,onChange:s=>r("name",s.target.value),className:o.name?"border-red-500":""}),o.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"last_name",children:"Apellido"}),e.jsx(t,{id:"last_name",value:i.last_name,onChange:s=>r("last_name",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email *"}),e.jsx(t,{id:"email",type:"email",value:i.email,onChange:s=>r("email",s.target.value),className:o.email?"border-red-500":""}),o.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"document_type",children:"Tipo Doc."}),e.jsxs(f,{value:i.document_type,onValueChange:s=>r("document_type",s),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Seleccionar"})}),e.jsxs(C,{children:[e.jsx(n,{value:"CC",children:"CC"}),e.jsx(n,{value:"TI",children:"TI"}),e.jsx(n,{value:"CE",children:"CE"}),e.jsx(n,{value:"Pasaporte",children:"Pasaporte"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"document_number",children:"Numero Doc."}),e.jsx(t,{id:"document_number",value:i.document_number,onChange:s=>r("document_number",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"birth_date",children:"Fecha Nac."}),e.jsx(t,{id:"birth_date",type:"date",value:i.birth_date,onChange:s=>r("birth_date",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"gender",children:"Genero"}),e.jsxs(f,{value:i.gender,onValueChange:s=>r("gender",s),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Seleccionar"})}),e.jsxs(C,{children:[e.jsx(n,{value:"M",children:"Masculino"}),e.jsx(n,{value:"F",children:"Femenino"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"password",children:"Nueva Contrasena"}),e.jsx(t,{id:"password",type:"password",value:i.password,onChange:s=>r("password",s.target.value),placeholder:"Dejar vacio para mantener"})]}),i.password&&e.jsxs("div",{children:[e.jsx(l,{htmlFor:"password_confirmation",children:"Confirmar Contrasena"}),e.jsx(t,{id:"password_confirmation",type:"password",value:i.password_confirmation,onChange:s=>r("password_confirmation",s.target.value)})]})]})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Contacto y Ubicacion"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Telefono"}),e.jsx(t,{id:"phone",value:i.phone,onChange:s=>r("phone",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"mobile",children:"Celular"}),e.jsx(t,{id:"mobile",value:i.mobile,onChange:s=>r("mobile",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Direccion"}),e.jsx(t,{id:"address",value:i.address,onChange:s=>r("address",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"neighborhood",children:"Barrio"}),e.jsx(t,{id:"neighborhood",value:i.neighborhood,onChange:s=>r("neighborhood",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"city",children:"Ciudad"}),e.jsx(t,{id:"city",value:i.city,onChange:s=>r("city",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"department",children:"Departamento"}),e.jsx(t,{id:"department",value:i.department,onChange:s=>r("department",s.target.value)})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(h,{children:[e.jsx(m,{children:"Roles"}),e.jsx(y,{children:"Asigna los roles del usuario"})]}),e.jsx(p,{className:"space-y-3",children:x.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:`role-${s.id}`,checked:i.roles.includes(s.id),onCheckedChange:()=>E(s.id)}),e.jsx(l,{htmlFor:`role-${s.id}`,className:"cursor-pointer",children:s.name})]},s.id))})]}),(w||L)&&i.student_profile&&e.jsxs(c,{children:[e.jsxs(h,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Perfil de Estudiante"]}),e.jsx(y,{children:"Informacion musical y academica"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Modalidad"}),e.jsxs(f,{value:i.student_profile.modality||"",onValueChange:s=>r("student_profile",{...i.student_profile,modality:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Seleccionar"})}),e.jsxs(C,{children:[e.jsx(n,{value:"Linaje Kids",children:"Linaje Kids"}),e.jsx(n,{value:"Linaje Teens",children:"Linaje Teens"}),e.jsx(n,{value:"Linaje Big",children:"Linaje Big"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Nivel Actual"}),e.jsx(t,{type:"number",min:1,max:10,value:i.student_profile.current_level||1,onChange:s=>r("student_profile",{...i.student_profile,current_level:parseInt(s.target.value)})})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Instrumento Deseado"}),e.jsx(t,{value:i.student_profile.desired_instrument||"",onChange:s=>r("student_profile",{...i.student_profile,desired_instrument:s.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{checked:i.student_profile.plays_instrument,onCheckedChange:s=>r("student_profile",{...i.student_profile,plays_instrument:s})}),e.jsx(l,{children:"Toca algun instrumento"})]}),i.student_profile.plays_instrument&&e.jsxs("div",{children:[e.jsx(l,{children:"Instrumentos que toca"}),e.jsx(t,{value:i.student_profile.instruments_played||"",onChange:s=>r("student_profile",{...i.student_profile,instruments_played:s.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{checked:i.student_profile.has_music_studies,onCheckedChange:s=>r("student_profile",{...i.student_profile,has_music_studies:s})}),e.jsx(l,{children:"Tiene estudios musicales previos"})]}),i.student_profile.has_music_studies&&e.jsxs("div",{children:[e.jsx(l,{children:"Escuelas/Academias"}),e.jsx(t,{value:i.student_profile.music_schools||"",onChange:s=>r("student_profile",{...i.student_profile,music_schools:s.target.value})})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("p",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Contacto de Emergencia"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Nombre"}),e.jsx(t,{value:i.student_profile.emergency_contact_name||"",onChange:s=>r("student_profile",{...i.student_profile,emergency_contact_name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Telefono"}),e.jsx(t,{value:i.student_profile.emergency_contact_phone||"",onChange:s=>r("student_profile",{...i.student_profile,emergency_contact_phone:s.target.value})})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Condiciones Medicas"}),e.jsx(j,{value:i.student_profile.medical_conditions||"",onChange:s=>r("student_profile",{...i.student_profile,medical_conditions:s.target.value}),placeholder:"Describir condiciones medicas relevantes..."})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Alergias"}),e.jsx(j,{value:i.student_profile.allergies||"",onChange:s=>r("student_profile",{...i.student_profile,allergies:s.target.value}),placeholder:"Listar alergias conocidas..."})]})]})]}),(F||k)&&i.teacher_profile&&e.jsxs(c,{children:[e.jsxs(h,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Perfil de Profesor"]}),e.jsx(y,{children:"Informacion profesional"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{checked:i.teacher_profile.is_active,onCheckedChange:s=>r("teacher_profile",{...i.teacher_profile,is_active:s})}),e.jsx(l,{children:"Profesor Activo"})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Instrumentos que domina *"}),e.jsx(t,{value:i.teacher_profile.instruments_played,onChange:s=>r("teacher_profile",{...i.teacher_profile,instruments_played:s.target.value}),placeholder:"Piano, Guitarra, Violin..."})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Especializacion"}),e.jsx(t,{value:i.teacher_profile.specialization||"",onChange:s=>r("teacher_profile",{...i.teacher_profile,specialization:s.target.value}),placeholder:"Piano Clasico, Jazz, etc."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Anos de Experiencia"}),e.jsx(t,{type:"number",min:0,max:50,value:i.teacher_profile.experience_years||0,onChange:s=>r("teacher_profile",{...i.teacher_profile,experience_years:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Tarifa por Hora ($)"}),e.jsx(t,{type:"number",min:0,value:i.teacher_profile.hourly_rate||0,onChange:s=>r("teacher_profile",{...i.teacher_profile,hourly_rate:parseFloat(s.target.value)})})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Formacion Musical"}),e.jsx(t,{value:i.teacher_profile.music_schools||"",onChange:s=>r("teacher_profile",{...i.teacher_profile,music_schools:s.target.value}),placeholder:"Conservatorio, Universidad, etc."})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Biografia"}),e.jsx(j,{value:i.teacher_profile.bio||"",onChange:s=>r("teacher_profile",{...i.teacher_profile,bio:s.target.value}),placeholder:"Breve descripcion profesional...",rows:4})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(N,{href:d("usuarios.index"),children:e.jsx(u,{variant:"outline",children:"Cancelar"})}),e.jsx(u,{type:"submit",disabled:b,className:"bg-[#7a9b3c] hover:bg-[#6a8a2c]",children:b?"Guardando...":"Guardar Cambios"})]})]})]})]})}export{ke as default};
