import{r as N,j as e,H as w,a as C}from"./app-BTsTmNHL.js";import{C as g,b as p,c as j,d as b,a as f}from"./card-ClkIcITg.js";import{B as P}from"./button-DHWy1sMZ.js";import{T as S}from"./toaster-CwE1Un-Z.js";import{c as u}from"./utils-DH-wF4ET.js";import{C as E}from"./credit-card-hBcSXXah.js";import{S as k}from"./shield-check-CcojM_ue.js";import{B as M}from"./banknote-CeLeuMXg.js";import{P as A}from"./phone-Df249I9i.js";import{C as R}from"./clock-BJfkCyGC.js";import"./app-wl4OcAi7.js";import"./index-LpK5PVwZ.js";import"./index-CJAUbtvd.js";import"./createLucideIcon-BpBpuwpV.js";function T({publicKey:a,amountInCents:o,reference:c,currency:n="COP",redirectUrl:i,customerEmail:h,customerName:r,integritySignature:d}){const l=N.useRef(null),x=(s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s:(console.warn("‚ö†Ô∏è Email inv√°lido detectado:",s),"noreply@academialinaje.com"))(h),m=a.startsWith("pub_test_");return N.useEffect(()=>{if(console.log("üîÑ Datos actualizados:",{publicKey:a,amountInCents:o,reference:c,currency:n,redirectUrl:i,customerEmail:h,customerName:r,integritySignature:d}),!l.current)return;const s=document.createElement("script");return s.src="https://checkout.wompi.co/widget.js",s.setAttribute("data-render","button"),s.setAttribute("data-public-key",a),s.setAttribute("data-currency",n),s.setAttribute("data-amount-in-cents",o.toString()),s.setAttribute("data-reference",c),s.setAttribute("data-redirect-url",i),s.setAttribute("data-customer-data:email",x),s.setAttribute("data-customer-data:full-name",r),d&&!m?(s.setAttribute("data-signature:integrity",d),console.log("üîê Modo PRODUCCI√ìN - Firma de integridad incluida")):m&&console.log("üß™ Modo TEST - Sin firma de integridad (opcional en sandbox)"),l.current.appendChild(s),s.onload=()=>{console.log("‚úÖ Script de Wompi cargado exitosamente"),setTimeout(()=>{const t=l.current?.querySelector("button");t?(console.log("üöÄ Abriendo widget de pago autom√°ticamente..."),t.click()):console.warn("‚ö†Ô∏è No se encontr√≥ el bot√≥n de Wompi")},1e3)},s.onerror=()=>{console.error("‚ùå Error al cargar el script de Wompi")},()=>{const t=l.current;if(t){const y=t.querySelector('script[src="https://checkout.wompi.co/widget.js"]');y&&t.removeChild(y)}}},[a,o,c,n,i,x,r,d,m]),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Pago Seguro con Wompi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haz clic en el bot√≥n de abajo para continuar"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",(o/100).toLocaleString("es-CO")," COP"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Referencia: ",c]})]})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("form",{ref:l})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Instrucciones de pago"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:'‚Ä¢ Haz clic en el bot√≥n "Pagar con Wompi"'}),e.jsx("li",{children:"‚Ä¢ Se abrir√° una ventana segura de Wompi"}),e.jsx("li",{children:"‚Ä¢ Elige tu m√©todo de pago (tarjeta, PSE, Nequi, etc.)"}),e.jsx("li",{children:"‚Ä¢ Completa la informaci√≥n requerida"}),e.jsx("li",{children:"‚Ä¢ Al finalizar, recibir√°s confirmaci√≥n de tu pago"})]})]})]})})})]})}function G({payment:a,wompi_config:o,paymentMethods:c}){const n=c?.online??!0,i=c?.manual??!0,h=n&&!i?"online":!n&&i?"manual":null,[r,d]=N.useState(h),[l,v]=N.useState(!1),x=`${a.student.name} ${a.student.last_name}`,m=a.student.email||"noreply@academialinaje.com",s=Math.round(a.amount*100),t=()=>{v(!0),C.post(`/matricula/checkout/${a.id}/manual`,{},{onFinish:()=>v(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Pagar Matr√≠cula"}),e.jsx(S,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Completar Matr√≠cula"}),e.jsx("p",{className:"text-gray-600",children:"Solo falta un paso para completar tu matr√≠cula"})]}),e.jsxs(g,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Resumen de Pago"}),e.jsx(b,{children:"Revisa los detalles de tu matr√≠cula"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Estudiante:"}),e.jsx("span",{className:"font-medium",children:x})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Programa:"}),e.jsx("span",{className:"font-medium",children:a.program.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Concepto:"}),e.jsx("span",{className:"font-medium",children:a.concept})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Correo:"}),e.jsx("span",{className:"font-medium text-sm",children:m})]}),e.jsxs("div",{className:"flex justify-between py-3 bg-primary/5 px-4 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",a.amount.toLocaleString("es-CO")," COP"]})]})]})]}),e.jsxs(g,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Elige tu m√©todo de pago"}),e.jsx(b,{children:"Selecciona c√≥mo deseas realizar el pago de tu matr√≠cula"})]}),e.jsx(f,{children:e.jsxs("div",{className:u("grid gap-4",n&&i?"grid-cols-1 sm:grid-cols-2":"grid-cols-1 max-w-md mx-auto"),children:[n&&e.jsxs("div",{onClick:()=>d("online"),className:u("p-5 border-2 rounded-xl cursor-pointer transition-all duration-200",r==="online"?"border-amber-500 bg-amber-50 shadow-md ring-1 ring-amber-500/20":"border-gray-200 hover:border-amber-300 hover:bg-amber-50/50"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:u("p-2.5 rounded-full",r==="online"?"bg-amber-500 text-white":"bg-gray-100 text-gray-500"),children:e.jsx(E,{className:"h-5 w-5"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Pago en L√≠nea"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Paga de forma segura con tarjeta de cr√©dito, d√©bito, PSE o Nequi."}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Pago seguro con Wompi"})]})]}),i&&e.jsxs("div",{onClick:()=>d("manual"),className:u("p-5 border-2 rounded-xl cursor-pointer transition-all duration-200",r==="manual"?"border-green-500 bg-green-50 shadow-md ring-1 ring-green-500/20":"border-gray-200 hover:border-green-300 hover:bg-green-50/50"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:u("p-2.5 rounded-full",r==="manual"?"bg-green-500 text-white":"bg-gray-100 text-gray-500"),children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Pago Manual"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Paga por transferencia bancaria o en efectivo. Un asesor te contactar√°."}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[e.jsx(A,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Te contactaremos para coordinar"})]})]})]})})]}),r==="online"&&e.jsxs(g,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Proceder al Pago"}),e.jsx(b,{children:"Completa tu pago de forma segura con Wompi"})]}),e.jsx(f,{children:e.jsx(T,{publicKey:o.public_key,amountInCents:s,reference:a.wompi_reference,currency:"COP",redirectUrl:window.location.origin+"/matricula/confirmacion",customerEmail:m,customerName:x,integritySignature:o.integrity_signature})}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"M√©todos aceptados"}),e.jsxs("div",{className:"flex justify-center gap-3 items-center mt-2 opacity-60",children:[e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"VISA"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"MASTERCARD"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"PSE"})]})]})]}),r==="manual"&&e.jsxs(g,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Pago Manual"}),e.jsx(b,{children:"Confirma tu matr√≠cula y un asesor se comunicar√° contigo"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"¬øC√≥mo funciona?"}),e.jsxs("ul",{className:"text-sm text-green-700 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Tu matr√≠cula quedar√° registrada como pendiente de pago"}),e.jsx("li",{children:"Un asesor te contactar√° para coordinar el pago"}),e.jsx("li",{children:"Podr√°s pagar por transferencia bancaria o en efectivo"})]})]})]})}),e.jsx(P,{onClick:t,disabled:l,className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",children:l?"Procesando...":"Confirmar Pago Manual"})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-primary hover:underline",children:"Cont√°ctanos"})]})})]})})]})}export{G as default};
