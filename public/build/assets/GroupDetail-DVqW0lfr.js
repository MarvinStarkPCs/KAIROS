import{r as b,j as e,H as _,L as u,a as A}from"./app-C2ts3GcV.js";import{A as k}from"./app-layout-D6QQx-Rn.js";import{B as n}from"./button-P4M4MpFt.js";import{C as m,a as x,b as h,d as p}from"./card-Bavisylk.js";import{B as j}from"./badge-CMrmwNvT.js";import{T as S,a as T,b as g,c as N}from"./tabs-CehjbJg0.js";import{I as t,G as D}from"./app-header-5lzEDeTU.js";import{C as E}from"./clock-DTp_7bBO.js";import{M as P}from"./map-pin-BN8lUOme.js";import{U as L}from"./users-CqclH2Pt.js";import{C as v}from"./circle-check-big-DPTJKexD.js";import{C as M}from"./circle-alert-D2S-YGMC.js";import{C as B}from"./circle-x-BrG4AwSH.js";import"./app-xOGZR_tH.js";import"./utils-CBfrqCZ4.js";import"./index-CmzMyFM4.js";import"./createLucideIcon-SiHI-uXJ.js";import"./index-CB__l4Qg.js";import"./index-CzU6gSnE.js";import"./toaster-D0e9s6eE.js";import"./index-YEfPdCwI.js";import"./wayfinder-FFrBTblC.js";import"./house-B4308BBV.js";import"./credit-card-DxyncC19.js";import"./lock-DhmqEOm4.js";import"./shield-BkS-nLpi.js";import"./music-CBXlPozq.js";import"./mail-DpxonfP2.js";const I={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"};function me({schedule:a,students:l,activities:c}){const[r,y]=b.useState({}),[f,C]=b.useState(new Date().toISOString().split("T")[0]),d=(s,i)=>{y(o=>({...o,[s]:i}))},w=()=>{const s=Object.entries(r).map(([i,o])=>({student_id:parseInt(i),status:o,notes:""}));if(s.length===0){alert("Debes marcar al menos un estudiante");return}A.post(`/profesor/grupo/${a.id}/asistencia`,{class_date:f,attendances:s})};return e.jsxs(k,{variant:"sidebar",title:`${a.program.name} - Portal Profesor`,children:[e.jsx(_,{title:`${a.program.name} - Portal Profesor`}),e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:a.program.name}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[e.jsx(j,{style:{backgroundColor:a.program.color},className:"text-white",children:I[a.day_of_week]||a.day_of_week}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(t,{iconNode:E,className:"w-4 h-4 mr-1"}),a.start_time," - ",a.end_time]}),a.location&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(t,{iconNode:P,className:"w-4 h-4 mr-1"}),a.location]})]})]}),e.jsx(u,{href:"/profesor/mis-grupos",children:e.jsx(n,{variant:"outline",children:"Volver"})})]})}),e.jsxs(S,{defaultValue:"students",className:"space-y-6",children:[e.jsxs(T,{className:"grid w-full grid-cols-3",children:[e.jsxs(g,{value:"students",children:[e.jsx(t,{iconNode:L,className:"w-4 h-4 mr-2"}),"Estudiantes (",l.length,")"]}),e.jsxs(g,{value:"attendance",children:[e.jsx(t,{iconNode:v,className:"w-4 h-4 mr-2"}),"Marcar Asistencia"]}),e.jsxs(g,{value:"activities",children:[e.jsx(t,{iconNode:D,className:"w-4 h-4 mr-2"}),"Actividades (",c.length,")"]})]}),e.jsx(N,{value:"students",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Lista de Estudiantes"})}),e.jsx(p,{children:l.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay estudiantes inscritos en este grupo"}):e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Inscrito: ",new Date(s.enrollment_date).toLocaleDateString("es-ES")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.attendance_stats.percentage,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[s.attendance_stats.present,"P / ",s.attendance_stats.late,"T / ",s.attendance_stats.absent,"A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["de ",s.attendance_stats.total," clases"]})]})]},s.id))})})]})}),e.jsx(N,{value:"attendance",children:e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Marcar Asistencia del Día"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Clase"}),e.jsx("input",{type:"date",value:f,onChange:s=>C(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#7a9b3c]"})]})]}),e.jsx(p,{children:l.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay estudiantes para marcar asistencia"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:r[s.id]==="present"?"default":"outline",onClick:()=>d(s.id,"present"),className:r[s.id]==="present"?"bg-green-600 hover:bg-green-700":"",children:[e.jsx(t,{iconNode:v,className:"w-4 h-4 mr-1"}),"Presente"]}),e.jsxs(n,{size:"sm",variant:r[s.id]==="late"?"default":"outline",onClick:()=>d(s.id,"late"),className:r[s.id]==="late"?"bg-orange-600 hover:bg-orange-700":"",children:[e.jsx(t,{iconNode:M,className:"w-4 h-4 mr-1"}),"Tarde"]}),e.jsxs(n,{size:"sm",variant:r[s.id]==="absent"?"default":"outline",onClick:()=>d(s.id,"absent"),className:r[s.id]==="absent"?"bg-red-600 hover:bg-red-700":"",children:[e.jsx(t,{iconNode:B,className:"w-4 h-4 mr-1"}),"Ausente"]})]})]},s.id))}),e.jsx(n,{onClick:w,className:"w-full bg-[#7a9b3c] hover:bg-[#6a8a2c]",disabled:Object.keys(r).length===0,children:"Guardar Asistencia"})]})})]})}),e.jsx(N,{value:"activities",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Actividades para Evaluar"})}),e.jsx(p,{children:c.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay actividades configuradas para este programa"}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:"outline",children:s.study_plan.module_name}),e.jsxs(j,{variant:"secondary",children:["Peso: ",s.weight,"%"]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Criterios de Evaluación:"}),e.jsx("ul",{className:"space-y-1",children:s.evaluation_criteria.map(i=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-[#7a9b3c] rounded-full mr-2"}),i.name," (",i.max_points," puntos)"]},i.id))})]}),e.jsx(u,{href:`/profesor/grupo/${a.id}/actividad/${s.id}/evaluar`,children:e.jsx(n,{className:"w-full bg-[#7a9b3c] hover:bg-[#6a8a2c]",children:"Evaluar Estudiantes"})})]},s.id))})})]})})]})]})]})}export{me as default};
