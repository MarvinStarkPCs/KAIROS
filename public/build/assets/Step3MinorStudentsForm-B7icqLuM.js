import{j as s}from"./app-_rOQn_46.js";import{C as b,b as j,c as x,d as f,a as N}from"./card-BBOBQJet.js";import{P as v}from"./PersonalDataFields-CermQRHc.js";import{M as y,P as $}from"./ProgramSelector-BBJaskU4.js";import{B as C}from"./button-Cwjg0RKq.js";import{c as p}from"./utils-CHYGzkwl.js";import{C as _}from"./check-DD34Qu--.js";import{C as g}from"./circle-alert-DSwOrkeA.js";import{T as w}from"./trash-2-B0HAO7F0.js";import{U as E}from"./user-plus-DROUFyQE.js";import{v as P}from"./matricula-validation-LO9h0nWd.js";import{M as D}from"./matricula-constants-C8wa8tCu.js";/* empty css            */import"./label-DRPRRf45.js";import"./index-DhMGY2fr.js";import"./index-LDKjRhno.js";import"./input-C_eRjc1n.js";import"./input-error-DYIh9_nk.js";import"./DocumentTypeSelect-T5O3v3NU.js";import"./select-fBj-5ZE1.js";import"./index-kZXzX9CC.js";import"./index-C0WYYgI1.js";import"./createLucideIcon-BTUecZaa.js";import"./chevron-down-gmsC21Id.js";import"./matricula-8YZRtE08.js";import"./radio-group-BLZ2cn5h.js";import"./index-B4ow9L1E.js";import"./index-86eqSqYr.js";import"./textarea-DonjrRxY.js";import"./music-DtlAsmeR.js";import"./badge-CxkKJAJ8.js";import"./index-HbNiKBAr.js";import"./format-BCEI6t3r.js";import"./clock-92yNzH6p.js";import"./users-CU2UoBYp.js";function M({students:m,currentIndex:e,onTabChange:c,onAddStudent:a,onRemoveStudent:u,validateStudent:r,maxStudents:n=10}){const o=m.length<n;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((t,l)=>{const i=r(t),d=l===e,h=t.name||`Estudiante ${l+1}`;return s.jsxs("div",{className:p("relative group",d&&"ring-2 ring-amber-500 rounded-lg"),children:[s.jsxs("button",{onClick:()=>c(l),className:p("px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",d?"bg-amber-500 text-white":"bg-muted text-muted-foreground hover:bg-muted"),children:[s.jsx("span",{className:"truncate max-w-[120px]",children:h}),i?s.jsx(_,{className:"h-4 w-4 text-green-500"}):s.jsx(g,{className:"h-4 w-4 text-amber-500"})]}),m.length>1&&s.jsx("button",{onClick:()=>u(l),className:p("absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1","opacity-0 group-hover:opacity-100 transition-opacity","hover:bg-red-600"),"aria-label":`Eliminar ${h}`,children:s.jsx(w,{className:"h-3 w-3"})})]},l)}),o&&s.jsxs(C,{type:"button",variant:"outline",onClick:a,className:"border-dashed border-2 hover:border-amber-500 hover:bg-amber-50 dark:hover:bg-amber-950/30",children:[s.jsx(E,{className:"h-4 w-4 mr-2"}),"Agregar Estudiante"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Estudiante ",e+1," de ",m.length]}),s.jsxs("p",{children:["MÃ¡ximo: ",n," estudiantes"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_,{className:"h-4 w-4 text-green-500"}),s.jsxs("span",{className:"text-muted-foreground",children:[m.filter(r).length," completos"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g,{className:"h-4 w-4 text-amber-500"}),s.jsxs("span",{className:"text-muted-foreground",children:[m.filter(t=>!r(t)).length," incompletos"]})]})]})]})}function us({students:m,currentIndex:e,programs:c,errors:a,onCurrentIndexChange:u,onAddStudent:r,onRemoveStudent:n,onUpdateStudent:o}){const t=m[e];if(!t)return null;const l={plays_instrument:t.datos_musicales.plays_instrument,instruments_played:t.datos_musicales.instruments_played,has_music_studies:t.datos_musicales.has_music_studies,music_schools:t.datos_musicales.music_schools,desired_instrument:t.datos_musicales.desired_instrument,modality:t.datos_musicales.modality,current_level:t.datos_musicales.current_level};return s.jsxs(b,{children:[s.jsxs(j,{children:[s.jsx(x,{children:"Datos de los Estudiantes"}),s.jsx(f,{children:"Ingrese los datos de cada estudiante menor de edad"})]}),s.jsxs(N,{className:"space-y-6",children:[s.jsx(M,{students:m,currentIndex:e,onTabChange:u,onAddStudent:r,onRemoveStudent:n,validateStudent:i=>P(i),maxStudents:D}),s.jsxs("div",{className:"space-y-6 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg mb-4",children:"Datos Personales"}),s.jsx(v,{namePrefix:`estudiantes.${e}`,data:{name:t.name,last_name:t.last_name,document_type:t.document_type,document_number:t.document_number,birth_place:t.birth_place,birth_date:t.birth_date,gender:t.gender},errors:{name:a[`estudiantes.${e}.name`],last_name:a[`estudiantes.${e}.last_name`],document_type:a[`estudiantes.${e}.document_type`],document_number:a[`estudiantes.${e}.document_number`],birth_place:a[`estudiantes.${e}.birth_place`],birth_date:a[`estudiantes.${e}.birth_date`],gender:a[`estudiantes.${e}.gender`]},onChange:(i,d)=>o(e,i,d),includeEmail:!1})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsx(y,{namePrefix:`estudiantes.${e}.datos_musicales`,data:l,errors:{plays_instrument:a[`estudiantes.${e}.datos_musicales.plays_instrument`],instruments_played:a[`estudiantes.${e}.datos_musicales.instruments_played`],has_music_studies:a[`estudiantes.${e}.datos_musicales.has_music_studies`],music_schools:a[`estudiantes.${e}.datos_musicales.music_schools`],desired_instrument:a[`estudiantes.${e}.datos_musicales.desired_instrument`],modality:a[`estudiantes.${e}.datos_musicales.modality`],current_level:a[`estudiantes.${e}.datos_musicales.current_level`]},onChange:(i,d)=>{o(e,`datos_musicales.${i}`,d)},birthDate:t.birth_date})}),s.jsx("div",{className:"border-t pt-6",children:s.jsx($,{programs:c,selectedProgramId:t.program_id,selectedScheduleId:t.schedule_id,onProgramChange:i=>o(e,"program_id",i),onScheduleChange:i=>o(e,"schedule_id",i),errors:{program_id:a[`estudiantes.${e}.program_id`],schedule_id:a[`estudiantes.${e}.schedule_id`]},showScheduleAsOptional:!0})})]})]})]})}export{us as Step3MinorStudentsForm};
