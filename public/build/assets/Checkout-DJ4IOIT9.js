import{r as n,j as e,H as P}from"./app-BMqdw8uR.js";import{C as m,a as g,b as j,c as f,d as x}from"./card-B1tZWUfE.js";import{T as E}from"./toaster-BsEf9V9_.js";import{B as k}from"./button-BUnJOvyd.js";import{L as b}from"./loader-circle-DWHqxvt2.js";import{C as S}from"./credit-card-BgSwk2Qb.js";import{C as W}from"./circle-check-big-CMchNm1B.js";import"./app-G9b-nQ8q.js";import"./index-Dt0e-YSB.js";import"./index-ESANKQPc.js";import"./createLucideIcon-Dv5u1mWo.js";function R({publicKey:a,amountInCents:r,reference:t,currency:i="COP",redirectUrl:c,customerEmail:N,customerName:v,integritySignature:h=null}){const[u,l]=n.useState(!0),[p,o]=n.useState(!1),d=n.useRef(null),y=(s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s:(console.warn("‚ö†Ô∏è Email inv√°lido detectado:",s),"noreply@academialinaje.com"))(N);n.useEffect(()=>{const s=document.createElement("script");return s.src="https://checkout.wompi.co/widget.js",s.async=!0,s.onload=()=>{console.log("‚úÖ Script de Wompi cargado"),w()},s.onerror=()=>{console.error("‚ùå Error al cargar el script de Wompi"),l(!1)},document.body.appendChild(s),()=>{document.body.contains(s)&&document.body.removeChild(s)}},[]);const w=()=>{if(!window.WidgetCheckout){console.error("‚ùå WidgetCheckout no est√° disponible"),l(!1);return}try{const s={currency:i,amountInCents:r,reference:t,publicKey:a,redirectUrl:c,customerData:{email:y,fullName:v}};h&&(s.signature={integrity:h}),console.log("üîß Configurando widget con:",s),d.current=new window.WidgetCheckout(s),l(!1),console.log("‚úÖ Widget inicializado correctamente")}catch(s){console.error("‚ùå Error al inicializar el widget:",s),l(!1)}},C=()=>{if(!d.current){console.error("‚ùå El widget no est√° inicializado");return}o(!0),console.log("üöÄ Abriendo widget de Wompi...");try{d.current.open(s=>{console.log("‚úÖ Resultado del pago:",s),o(!1),s&&s.transaction&&s.transaction.id&&console.log("üí≥ ID de transacci√≥n:",s.transaction.id)})}catch(s){console.error("‚ùå Error al abrir el widget:",s),o(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Pago Seguro con Wompi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecciona tu m√©todo de pago preferido"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",(r/100).toLocaleString("es-CO")," COP"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Referencia: ",t]})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{onClick:C,size:"lg",disabled:u||p,className:"w-full max-w-md text-lg h-14 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-5 w-5 animate-spin"}),"Cargando pasarela de pago..."]}):p?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-5 w-5 animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-5 w-5"}),"Pagar $",(r/100).toLocaleString("es-CO")," COP"]})})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Instrucciones de pago"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:'‚Ä¢ Haz clic en el bot√≥n "Pagar"'}),e.jsx("li",{children:"‚Ä¢ Se abrir√° una ventana segura de Wompi"}),e.jsx("li",{children:"‚Ä¢ Elige tu m√©todo de pago (tarjeta, PSE, Nequi, etc.)"}),e.jsx("li",{children:"‚Ä¢ Completa la informaci√≥n requerida"}),e.jsx("li",{children:"‚Ä¢ Al finalizar, recibir√°s confirmaci√≥n de tu pago"})]})]})]})})})]})}function q({payment:a,wompi_config:r}){const t=`${a.student.name} ${a.student.last_name}`,i=a.student.email||"noreply@academialinaje.com",c=Math.round(a.amount*100);return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Pagar Matr√≠cula"}),e.jsx(E,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Completar Matr√≠cula"}),e.jsx("p",{className:"text-gray-600",children:"Solo falta un paso para completar tu matr√≠cula"})]}),e.jsxs(m,{className:"mb-6",children:[e.jsxs(g,{children:[e.jsx(j,{children:"Resumen de Pago"}),e.jsx(f,{children:"Revisa los detalles de tu matr√≠cula"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Estudiante:"}),e.jsx("span",{className:"font-medium",children:t})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Programa:"}),e.jsx("span",{className:"font-medium",children:a.program.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Concepto:"}),e.jsx("span",{className:"font-medium",children:a.concept})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Correo:"}),e.jsx("span",{className:"font-medium text-sm",children:i})]}),e.jsxs("div",{className:"flex justify-between py-3 bg-primary/5 px-4 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",a.amount.toLocaleString("es-CO")," COP"]})]})]})]}),e.jsx(m,{className:"mb-6",children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Pagos Mensuales Autom√°ticos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Al proceder con el pago, configurar√°s una suscripci√≥n mensual autom√°tica. Tu tarjeta se cargar√° cada mes sin necesidad de realizar el pago manualmente."})]})]})})}),e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsx(j,{children:"Proceder al Pago"}),e.jsx(f,{children:"Completa tu pago de forma segura con Wompi"})]}),e.jsx(x,{children:e.jsx(R,{publicKey:r.public_key,amountInCents:c,reference:a.wompi_reference,currency:"COP",redirectUrl:window.location.origin+"/matricula/confirmacion",customerEmail:i,customerName:t,integritySignature:r.integrity_signature})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"M√©todos de pago aceptados"}),e.jsxs("div",{className:"flex justify-center gap-4 items-center opacity-60",children:[e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"VISA"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"MASTERCARD"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"PSE"})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-primary hover:underline",children:"Cont√°ctanos"})]})})]})})]})}export{q as default};
