import{j as s}from"./app-D-uv_Psx.js";import{C as b,a as j,b as x,c as f,d as y}from"./card-Ehp7GzY4.js";import{P as N}from"./PersonalDataFields-DMaen7cy.js";import{M as v,P as $}from"./ProgramSelector-MsZ0w2pq.js";import{B as C}from"./button-CZLon7G2.js";import{c as u}from"./index-BYfh92J7.js";import{C as _}from"./check-Dq9AMTRn.js";import{C as g}from"./circle-alert-BfyGHko7.js";import{T as w}from"./trash-2-BjmKE-L5.js";import{U as E}from"./user-plus-nibDWJXk.js";import{v as P}from"./matricula-validation-DUox7LH5.js";import{M as D}from"./matricula-constants-C8wa8tCu.js";import"./app-DONzrYJq.js";import"./label-t_dBD3eZ.js";import"./index-BkKZb9GP.js";import"./index-C6PShWrw.js";import"./input-DQwzM51V.js";import"./input-error-C9HM6f6M.js";import"./DocumentTypeSelect-wzG5uy9Q.js";import"./select-DTaTGzVD.js";import"./index-DVuXEgNF.js";import"./index-Cph7qshs.js";import"./createLucideIcon-ByNTHBwj.js";import"./matricula-8YZRtE08.js";import"./radio-group-ErUKM2Qz.js";import"./index-DyTktlIA.js";import"./index-wHbZweVG.js";import"./textarea-BysyMwhi.js";import"./music-Cu_syfvv.js";import"./badge-Dnc2s0NR.js";import"./index-D8JXF2hF.js";import"./format-BCEI6t3r.js";import"./clock-DIsImJZa.js";import"./users-BvUEPpte.js";function M({students:m,currentIndex:e,onTabChange:c,onAddStudent:t,onRemoveStudent:p,validateStudent:d,maxStudents:n=10}){const o=m.length<n;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((a,l)=>{const i=d(a),r=l===e,h=a.name||`Estudiante ${l+1}`;return s.jsxs("div",{className:u("relative group",r&&"ring-2 ring-amber-500 rounded-lg"),children:[s.jsxs("button",{onClick:()=>c(l),className:u("px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",r?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx("span",{className:"truncate max-w-[120px]",children:h}),i?s.jsx(_,{className:"h-4 w-4 text-green-500"}):s.jsx(g,{className:"h-4 w-4 text-amber-500"})]}),m.length>1&&s.jsx("button",{onClick:()=>p(l),className:u("absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1","opacity-0 group-hover:opacity-100 transition-opacity","hover:bg-red-600"),"aria-label":`Eliminar ${h}`,children:s.jsx(w,{className:"h-3 w-3"})})]},l)}),o&&s.jsxs(C,{type:"button",variant:"outline",onClick:t,className:"border-dashed border-2 hover:border-amber-500 hover:bg-amber-50",children:[s.jsx(E,{className:"h-4 w-4 mr-2"}),"Agregar Estudiante"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("p",{children:["Estudiante ",e+1," de ",m.length]}),s.jsxs("p",{children:["MÃ¡ximo: ",n," estudiantes"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_,{className:"h-4 w-4 text-green-500"}),s.jsxs("span",{className:"text-gray-600",children:[m.filter(d).length," completos"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g,{className:"h-4 w-4 text-amber-500"}),s.jsxs("span",{className:"text-gray-600",children:[m.filter(a=>!d(a)).length," incompletos"]})]})]})]})}function cs({students:m,currentIndex:e,programs:c,errors:t,onCurrentIndexChange:p,onAddStudent:d,onRemoveStudent:n,onUpdateStudent:o}){const a=m[e];if(!a)return null;const l={plays_instrument:a.datos_musicales.plays_instrument,instruments_played:a.datos_musicales.instruments_played,has_music_studies:a.datos_musicales.has_music_studies,music_schools:a.datos_musicales.music_schools,desired_instrument:a.datos_musicales.desired_instrument,modality:a.datos_musicales.modality,current_level:a.datos_musicales.current_level};return s.jsxs(b,{children:[s.jsxs(j,{children:[s.jsx(x,{children:"Datos de los Estudiantes"}),s.jsx(f,{children:"Ingrese los datos de cada estudiante menor de edad"})]}),s.jsxs(y,{className:"space-y-6",children:[s.jsx(M,{students:m,currentIndex:e,onTabChange:p,onAddStudent:d,onRemoveStudent:n,validateStudent:i=>P(i),maxStudents:D}),s.jsxs("div",{className:"space-y-6 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg mb-4",children:"Datos Personales"}),s.jsx(N,{namePrefix:`estudiantes.${e}`,data:{name:a.name,last_name:a.last_name,document_type:a.document_type,document_number:a.document_number,birth_place:a.birth_place,birth_date:a.birth_date,gender:a.gender},errors:{name:t[`estudiantes.${e}.name`],last_name:t[`estudiantes.${e}.last_name`],document_type:t[`estudiantes.${e}.document_type`],document_number:t[`estudiantes.${e}.document_number`],birth_place:t[`estudiantes.${e}.birth_place`],birth_date:t[`estudiantes.${e}.birth_date`],gender:t[`estudiantes.${e}.gender`]},onChange:(i,r)=>o(e,i,r),includeEmail:!1})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsx(v,{namePrefix:`estudiantes.${e}.datos_musicales`,data:l,errors:{plays_instrument:t[`estudiantes.${e}.datos_musicales.plays_instrument`],instruments_played:t[`estudiantes.${e}.datos_musicales.instruments_played`],has_music_studies:t[`estudiantes.${e}.datos_musicales.has_music_studies`],music_schools:t[`estudiantes.${e}.datos_musicales.music_schools`],desired_instrument:t[`estudiantes.${e}.datos_musicales.desired_instrument`],modality:t[`estudiantes.${e}.datos_musicales.modality`],current_level:t[`estudiantes.${e}.datos_musicales.current_level`]},onChange:(i,r)=>{o(e,`datos_musicales.${i}`,r)},birthDate:a.birth_date})}),s.jsx("div",{className:"border-t pt-6",children:s.jsx($,{programs:c,selectedProgramId:a.program_id,selectedScheduleId:a.schedule_id,onProgramChange:i=>o(e,"program_id",i),onScheduleChange:i=>o(e,"schedule_id",i),errors:{program_id:t[`estudiantes.${e}.program_id`],schedule_id:t[`estudiantes.${e}.schedule_id`]},showScheduleAsOptional:!0})})]})]})]})}export{cs as Step3MinorStudentsForm};
