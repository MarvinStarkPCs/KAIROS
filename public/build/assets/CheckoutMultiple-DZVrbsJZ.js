import{r as o,j as e,H as S}from"./app-5znjwuGY.js";import{C as c,b as x,c as u,a as m,d as f}from"./card-D3IdMJaK.js";import{B as M}from"./button-Mfgw1nNd.js";import{c as T}from"./utils-4szXMDIU.js";import{T as E}from"./toaster-A1kLF62O.js";import{U as I}from"./users-C2QFi3It.js";import{C as N}from"./circle-check-big-Dy7MkD6O.js";import{C as L}from"./credit-card-b_0IBOSy.js";import{L as v}from"./loader-circle-BHYXKi0e.js";/* empty css            */import"./index-C8XmJ8Dh.js";import"./index-AbsSJQPo.js";import"./createLucideIcon-Bo3j8GB8.js";function U({payments:d,totalAmount:C,wompiPublicKey:g,redirectUrl:p}){const[r,w]=o.useState(0),[l,k]=o.useState([]),[y,h]=o.useState(!1),s=d[r];o.useEffect(()=>{if(!s||l.includes(s.id))return;const a=document.querySelector('script[src*="checkout.wompi"]');a&&a.remove();const n=document.getElementById("wompi-widget");n&&(n.innerHTML="");const t=document.createElement("script");return t.src="https://checkout.wompi.co/widget.js",t.async=!0,t.setAttribute("data-render","button"),t.setAttribute("data-public-key",g),t.setAttribute("data-currency","COP"),t.setAttribute("data-amount-in-cents",s.amountInCents.toString()),t.setAttribute("data-reference",s.wompi_reference),s.integritySignature&&t.setAttribute("data-signature:integrity",s.integritySignature),t.setAttribute("data-redirect-url",p),t.setAttribute("data-customer-data:email",s.student.email),t.setAttribute("data-customer-data:full-name",`${s.student.name} ${s.student.last_name}`),t.setAttribute("data-acceptance-token","true"),t.setAttribute("data-payment-methods-enabled","CARD"),t.onload=()=>{h(!1),console.log("Wompi widget cargado para:",s.student.name);const i=setInterval(()=>{const b=document.querySelector('form[action*="checkout.wompi"] button');b&&(clearInterval(i),setTimeout(()=>b.click(),500))},200);setTimeout(()=>clearInterval(i),3e3)},n&&n.appendChild(t),()=>{n&&t.parentNode===n&&n.removeChild(t)}},[r,s,g,p,l]);const P=()=>{s&&!l.includes(s.id)&&k(a=>[...a,s.id]),r<d.length-1&&(h(!0),w(r+1),window.scrollTo({top:0,behavior:"smooth"}))},A=()=>{P()},j=(r+1)/d.length*100;return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Pagar Matr√≠culas"}),e.jsx(E,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-950 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"¬°Matr√≠culas Creadas Exitosamente!"}),e.jsx("p",{className:"text-muted-foreground",children:"Procede con el pago de cada matr√≠cula para completar el proceso"}),e.jsxs("div",{className:"mt-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-muted-foreground mb-2",children:[e.jsxs("span",{children:["Pago ",r+1," de ",d.length]}),e.jsxs("span",{children:[Math.round(j),"%"]})]}),e.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-500",style:{width:`${j}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(c,{className:"sticky top-6",children:[e.jsx(x,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Estudiantes (",d.length,")"]})}),e.jsxs(m,{className:"space-y-2",children:[d.map((a,n)=>{const t=n===r,i=l.includes(a.id);return e.jsx("div",{className:T("p-4 rounded-lg border-2 transition-all",t&&"border-amber-500 bg-amber-50 dark:bg-amber-950/30 shadow-md",i&&"border-green-500 bg-green-50 dark:bg-green-950/30",!t&&!i&&"border-border bg-card"),children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i&&e.jsx(N,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),t&&!i&&e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-amber-500 border-t-transparent animate-spin flex-shrink-0"}),e.jsxs("p",{className:"font-semibold text-sm truncate",children:[a.student.name," ",a.student.last_name]})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.program.name}),e.jsxs("p",{className:"text-sm font-bold text-foreground mt-1",children:["$",a.amount.toLocaleString("es-CO")]})]})})},a.id)}),e.jsx("div",{className:"pt-4 border-t-2 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:["$",C.toLocaleString("es-CO")," COP"]})]})})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(c,{children:[e.jsxs(x,{className:"bg-gradient-to-r from-amber-50 dark:from-amber-950/30 to-orange-50 dark:to-orange-950/30",children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Pagar Matr√≠cula ",r+1]}),e.jsxs(f,{children:[s.student.name," ",s.student.last_name]})]}),e.jsxs(m,{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold",children:[s.student.name," ",s.student.last_name]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Programa"}),e.jsx("p",{className:"font-semibold",children:s.program.name})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg text-white text-center",children:[e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Monto a Pagar"}),e.jsxs("p",{className:"text-4xl font-bold",children:["$",s.amount.toLocaleString("es-CO")]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"COP"})]})]})]}),e.jsxs(c,{children:[e.jsxs(x,{children:[e.jsx(u,{children:"M√©todo de Pago"}),e.jsx(f,{children:"Paga de forma segura con tarjeta de cr√©dito o d√©bito"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"üí≥ Cobro Autom√°tico Mensual:"})," Al registrar tu tarjeta, se configurar√°n pagos autom√°ticos mensuales para todas las matr√≠culas."]})}),e.jsx("div",{id:"wompi-widget",className:"flex justify-center py-8",children:y?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(v,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Cargando pasarela de pago..."})]}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(v,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Abriendo pasarela de pago..."})]})}),r<d.length-1&&e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"¬øPrefieres pagar este despu√©s?"}),e.jsx(M,{type:"button",variant:"outline",onClick:A,className:"w-full",children:"Saltar y pagar siguiente estudiante"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pago seguro procesado por Wompi"})]})})]})]}),e.jsx(c,{className:"bg-gradient-to-br from-green-50 dark:from-green-950/30 to-emerald-50 dark:to-emerald-950/30 border-green-200 dark:border-green-800",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-6 w-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"¬øQu√© pasa despu√©s del pago?"}),e.jsxs("ul",{className:"text-sm text-green-800 dark:text-green-200 space-y-1",children:[e.jsx("li",{children:"‚úì Recibir√°s confirmaci√≥n por email"}),e.jsx("li",{children:"‚úì Se activar√°n las matr√≠culas pagadas"}),e.jsx("li",{children:"‚úì Podr√°s acceder al panel de estudiante"}),e.jsx("li",{children:"‚úì Los pagos mensuales se procesar√°n autom√°ticamente"})]})]})]})})})]})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-amber-600 hover:underline font-medium",children:"Cont√°ctanos"})]})})]})})]})}export{U as default};
