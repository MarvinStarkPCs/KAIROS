import{u as C,j as e,H as w}from"./app-C_wc9es_.js";import{H as x}from"./heading-small-B4QFQAz_.js";import{I as d}from"./input-error-DFCknaJe.js";import{B as P}from"./button-CK7_c_5e.js";import{I as o}from"./input-C7PQsbVn.js";import{L as i}from"./label-nyAx6Y8t.js";import{S as c}from"./switch-BQpkr0Q9.js";import{A as L}from"./app-layout-RCkHY00m.js";import{s as T}from"./app-header-3tM_PALz.js";import{U as m}from"./users-BlXHteJc.js";import{C as $}from"./credit-card-Cyqos1IL.js";import{B as M}from"./banknote-DUWBtdF-.js";import{T as g}from"./triangle-alert-C5Oz38JB.js";import{c as b}from"./createLucideIcon-Cl_h1Hpc.js";import{D}from"./dollar-sign-BaSFt2-U.js";/* empty css            */import"./utils-BTwnVSy2.js";import"./index-CNhhqjg2.js";import"./index-BPZo39PE.js";import"./index-DJBO6EKN.js";import"./index-myZmSymV.js";import"./index-Be2p5AN3.js";import"./index-BLRCw3fc.js";import"./toaster-eRoXJvOx.js";import"./chevron-right-FEguOG6w.js";import"./index-BXFwRZdy.js";import"./index-CLa6oRL-.js";import"./wayfinder-Bf9OnZdi.js";import"./index-D12nj1Ca.js";import"./book-open-DgLAYnVa.js";import"./graduation-cap-DpEnpuH4.js";import"./calendar-CdY4SBhE.js";import"./file-text-BcV-VVC0.js";import"./lock-l4QBdaDv.js";import"./shield-Dk7fcTnH.js";import"./chevron-down-D4MJa3Wh.js";import"./loader-circle-DIXjFJg0.js";import"./mail-jATxNgrm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],E=b("Percent",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],A=b("Tag",S),q=[{title:"Configuración de Pagos",href:T().url}],u=[{key:"amount_linaje_kids",name:"Linaje Kids",description:"Niños de 4 a 9 años",color:"amber"},{key:"amount_linaje_teens",name:"Linaje Teens",description:"Niños y adolescentes de 10 a 17 años",color:"blue"},{key:"amount_linaje_big",name:"Linaje Big",description:"Adultos de 18 años en adelante",color:"green"}];function ve({paymentSetting:r}){const{data:a,setData:t,patch:h,processing:p,errors:l}=C({amount_linaje_kids:r?.amount_linaje_kids??"100000",amount_linaje_teens:r?.amount_linaje_teens??"100000",amount_linaje_big:r?.amount_linaje_big??"100000",is_active:r?.is_active??!0,enable_online_payment:r?.enable_online_payment??!0,enable_manual_payment:r?.enable_manual_payment??!0,discount_min_students:r?.discount_min_students??3,discount_percentage:r?.discount_percentage??"0"}),j=s=>{!s&&!a.enable_manual_payment||t("enable_online_payment",s)},_=s=>{!s&&!a.enable_online_payment||t("enable_manual_payment",s)},f=s=>{s.preventDefault(),h("/pagos/settings",{preserveScroll:!0})},N=(s,n)=>{switch(s){case"amber":return"bg-amber-500 text-white";case"blue":return"bg-blue-500 text-white";case"green":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},v=s=>{switch(s){case"amber":return"border-amber-200 dark:border-amber-800 bg-amber-50/50";case"blue":return"border-blue-200 dark:border-blue-800 bg-blue-50/50";case"green":return"border-green-200 dark:border-green-800 bg-green-50/50";default:return""}};return e.jsxs(L,{breadcrumbs:q,children:[e.jsx(w,{title:"Configuración de Pagos"}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(x,{title:"Configuración de Pagos",description:"Configura los montos de pago por modalidad y otros parámetros"}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-semibold",children:"Montos por Modalidad"})]}),e.jsx("p",{className:"text-sm text-muted-foreground -mt-4",children:"Configura el monto de pago para cada modalidad. Cada estudiante pagará según su grupo de edad."}),e.jsx("div",{className:"grid gap-4",children:u.map(s=>e.jsx("div",{className:`rounded-lg border p-4 ${v(s.color)}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${N(s.color)}`,children:e.jsx(m,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:s.key,className:"text-base font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"$"}),e.jsx(o,{id:s.key,type:"number",min:"1500",step:"1",className:"w-36 text-right font-semibold",value:a[s.key],onChange:n=>t(s.key,n.target.value),placeholder:"100000",required:!0}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"COP"})]}),e.jsx(d,{message:l[s.key]})]})]})},s.key))}),e.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium",children:"Vista Previa de Montos"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:u.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.name}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",Number(a[s.key]).toLocaleString("es-CO")]})]},s.key))})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"is_active",children:"Configuración activa"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Habilita esta configuración para aplicar los montos a nuevas matrículas"})]}),e.jsx(c,{id:"is_active",checked:a.is_active,onCheckedChange:s=>t("is_active",s)})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",children:"Métodos de Pago"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona los métodos de pago disponibles para las matrículas. Debe haber al menos uno activo."})]}),e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-4 transition-colors ${a.enable_online_payment?"border-amber-300 dark:border-amber-700 bg-amber-50/50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.enable_online_payment?"bg-amber-500 text-white":"bg-muted text-muted-foreground"}`,children:e.jsx($,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"enable_online_payment",children:"Pago en Línea (Wompi)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tarjeta de crédito, débito, PSE, Nequi"})]})]}),e.jsx(c,{id:"enable_online_payment",checked:a.enable_online_payment,onCheckedChange:j,disabled:a.enable_online_payment&&!a.enable_manual_payment})]}),e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-4 transition-colors ${a.enable_manual_payment?"border-green-300 dark:border-green-700 bg-green-50/50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.enable_manual_payment?"bg-green-500 text-white":"bg-muted text-muted-foreground"}`,children:e.jsx(M,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"enable_manual_payment",children:"Pago Manual"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transferencia bancaria o efectivo en instalaciones"})]})]}),e.jsx(c,{id:"enable_manual_payment",checked:a.enable_manual_payment,onCheckedChange:_,disabled:a.enable_manual_payment&&!a.enable_online_payment})]}),(!a.enable_online_payment||!a.enable_manual_payment)&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 p-3 text-sm text-amber-800 dark:text-amber-200",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{children:["Solo el método de ",e.jsx("strong",{children:a.enable_online_payment?"pago en línea":"pago manual"})," estará disponible para los estudiantes."]})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-semibold",children:"Descuento por Múltiples Estudiantes"})]}),e.jsx("p",{className:"text-sm text-muted-foreground -mt-2",children:"Configura un descuento automático cuando un responsable matricula varios estudiantes a la vez."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 border-purple-200 dark:border-purple-800 bg-purple-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-500 text-white",children:e.jsx(m,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"discount_min_students",className:"text-base font-medium",children:"Mínimo de estudiantes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"A partir de cuántos estudiantes aplica"})]})]}),e.jsx(o,{id:"discount_min_students",type:"number",min:"2",max:"20",step:"1",className:"w-full text-center font-semibold text-lg",value:a.discount_min_students,onChange:s=>t("discount_min_students",parseInt(s.target.value)||2),required:!0}),e.jsx(d,{message:l.discount_min_students})]}),e.jsxs("div",{className:"rounded-lg border p-4 border-purple-200 dark:border-purple-800 bg-purple-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-500 text-white",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"discount_percentage",className:"text-base font-medium",children:"Porcentaje de descuento"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Descuento aplicado a cada matrícula"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{id:"discount_percentage",type:"number",min:"0",max:"100",step:"0.5",className:"w-full text-center font-semibold text-lg",value:a.discount_percentage,onChange:s=>t("discount_percentage",s.target.value),required:!0}),e.jsx("span",{className:"text-lg font-semibold text-muted-foreground",children:"%"})]}),e.jsx(d,{message:l.discount_percentage})]})]}),Number(a.discount_percentage)>0&&e.jsxs("div",{className:"rounded-lg bg-purple-50 dark:bg-purple-950/30 border border-purple-200 dark:border-purple-800 p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Vista Previa del Descuento"}),e.jsxs("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:["Si un responsable matricula ",e.jsxs("strong",{children:[a.discount_min_students," o más estudiantes"]}),", cada uno recibe un ",e.jsxs("strong",{children:[Number(a.discount_percentage),"% de descuento"]}),"."]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 pt-2",children:u.map(s=>{const n=Number(a[s.key]),y=n*(Number(a.discount_percentage)/100),k=n-y;return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-purple-600 mb-1",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground line-through",children:["$",n.toLocaleString("es-CO")]}),e.jsxs("p",{className:"text-base font-bold text-purple-700 dark:text-purple-300",children:["$",Math.round(k).toLocaleString("es-CO")]})]},s.key)})})]}),Number(a.discount_percentage)===0&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-muted border border-border p-3 text-sm text-muted-foreground",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:"El descuento está desactivado. Establece un porcentaje mayor a 0 para activarlo."})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(P,{type:"submit",disabled:p,children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),p?"Guardando...":"Guardar Configuración"]})})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-6 space-y-4",children:[e.jsx(x,{title:"Información Importante",description:"Ten en cuenta lo siguiente sobre la configuración de pagos"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Kids:"})," Para niños de 4 a 9 años de edad."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Teens:"})," Para niños y adolescentes de 10 a 17 años de edad."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Big:"})," Para adultos de 18 años en adelante (se asigna automáticamente)."]}),e.jsxs("li",{children:["Los montos configurados se aplicarán a todas las ",e.jsx("strong",{children:"nuevas matrículas"})," según la modalidad seleccionada."]}),e.jsx("li",{children:"Los pagos ya existentes no se verán afectados por estos cambios."}),e.jsx("li",{children:"El monto mínimo permitido es de $1,500 COP (requerido por Wompi)."}),e.jsxs("li",{children:[e.jsx("strong",{children:"Descuento:"})," Se aplica automáticamente cuando un responsable matricula el número mínimo de estudiantes configurado."]}),e.jsxs("li",{children:["El descuento se aplica a ",e.jsx("strong",{children:"cada matrícula"})," individual, no al total."]})]})]})]})})]})}export{ve as default};
