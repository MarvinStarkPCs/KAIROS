import{r as p,j as e,H as S,L as f,a as g}from"./app-Db7wZbYh.js";import{B as i}from"./button-C6qLdptJ.js";import{T,a as R,b as m,c as l,d as B,e as d}from"./table-CSVpLjGl.js";import{B as b}from"./badge-DVOM1o50.js";import{C as N,a as _,b as v,c as y,d as C}from"./card-BqePQ_-x.js";import{I as u}from"./input-By5Esf3p.js";import{L as j}from"./label-BNN-ChdT.js";import{s as x}from"./index-ikzcNs2d.js";import{A as E}from"./app-layout-RJPs59Jr.js";import{c as H}from"./createLucideIcon-DPZFZZYa.js";import{R as I}from"./refresh-cw-BCvb1sgN.js";/* empty css            */import"./index-BIvH6z9d.js";import"./index-DxJPmfU5.js";import"./index-CMWG4mbA.js";import"./music-BCJ8hYQ8.js";import"./mail-DbHa6e_F.js";import"./lock-Dds4uYBC.js";import"./shield-BZC1aw_P.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],O=H("Filter",z),k=a=>a.includes("created")?"bg-green-100 text-green-800":a.includes("updated")?"bg-blue-100 text-blue-800":a.includes("deleted")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",M=a=>a.includes("created")?"Creado":a.includes("updated")?"Actualizado":a.includes("deleted")?"Eliminado":a;function le({activities:a,meta:r,links:n,filters:c}){const[h,F]=p.useState(!1),[t,o]=p.useState({start_date:c?.start_date||"",end_date:c?.end_date||"",user_id:c?.user_id||"",action:c?.action||""}),A=[{title:"Dashboard",href:x("dashboard")},{title:"Auditoría",href:x("audit.index")}],w=s=>{s.preventDefault(),g.get(x("audit.filter"),t)},D=()=>{o({start_date:"",end_date:"",user_id:"",action:""}),g.get(x("audit.index"))},L=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(E,{breadcrumbs:A,children:[e.jsx(S,{title:"Auditoría"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6 bg-[#f9f6f2]",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-800",children:"Auditoría del Sistema"}),e.jsx("p",{className:"text-gray-600",children:"Registro de todas las actividades realizadas en el sistema"})]})}),e.jsxs(N,{className:"shadow-md",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Filtros"}),e.jsx(y,{children:"Busca actividades específicas"})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>F(!h),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),h?"Ocultar":"Mostrar"," Filtros"]})]})}),h&&e.jsx(C,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"start_date",children:"Fecha Inicio"}),e.jsx(u,{id:"start_date",type:"date",value:t.start_date,onChange:s=>o({...t,start_date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"end_date",children:"Fecha Fin"}),e.jsx(u,{id:"end_date",type:"date",value:t.end_date,onChange:s=>o({...t,end_date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"action",children:"Acción"}),e.jsx(u,{id:"action",placeholder:"Ej: created, updated",value:t.action,onChange:s=>o({...t,action:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"submit",className:"bg-[#7a9b3c] hover:bg-[#6a8a2c]",children:"Filtrar"}),e.jsxs(i,{type:"button",variant:"outline",onClick:D,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Limpiar"]})]})]})})]}),e.jsxs(N,{className:"shadow-md",children:[e.jsxs(_,{children:[e.jsx(v,{children:"Registro de Actividades"}),e.jsxs(y,{children:["Mostrando ",r.from," a ",r.to," de ",r.total," registros"]})]}),e.jsxs(C,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(T,{children:[e.jsx(R,{children:e.jsxs(m,{children:[e.jsx(l,{children:"Acción"}),e.jsx(l,{children:"Usuario"}),e.jsx(l,{children:"Elemento"}),e.jsx(l,{children:"Tipo"}),e.jsx(l,{children:"Fecha y Hora"})]})}),e.jsx(B,{children:a.length>0?a.map(s=>e.jsxs(m,{children:[e.jsx(d,{children:e.jsx(b,{className:k(s.description),children:M(s.description)})}),e.jsx(d,{children:s.causer?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.causer.name}),e.jsx("span",{className:"text-xs text-gray-500",children:s.causer.email})]}):e.jsx("span",{className:"text-gray-500",children:"Sistema"})}),e.jsx(d,{children:s.subject?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.subject.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",s.subject.id]})]}):e.jsx("span",{className:"text-gray-500",children:"-"})}),e.jsx(d,{children:e.jsx(b,{variant:"outline",children:s.subject?.type.split("\\").pop()||"Desconocido"})}),e.jsx(d,{className:"text-sm text-gray-600",children:L(s.created_at)})]},s.id)):e.jsx(m,{children:e.jsx(d,{colSpan:5,className:"text-center py-6 text-gray-500",children:"No hay registros de auditoría."})})})]})}),r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Página ",r.current_page," de ",r.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[n.prev&&e.jsx(f,{href:n.prev,children:e.jsx(i,{variant:"outline",size:"sm",children:"Anterior"})}),n.next&&e.jsx(f,{href:n.next,children:e.jsx(i,{variant:"outline",size:"sm",children:"Siguiente"})})]})]})]})]})]})]})}export{le as default};
