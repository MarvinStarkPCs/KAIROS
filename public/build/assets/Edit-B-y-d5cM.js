import{u as C,r as w,j as e,L as v}from"./app-CEAIv0YG.js";import{A as E}from"./app-layout-H7zJ-Z4Y.js";import{B as n}from"./button-Bez6SB1q.js";import{I as c}from"./input-DJrPtih2.js";import{L as l}from"./label-DLjV6PQT.js";import{T as F}from"./textarea-BMwyo2TN.js";import{S as m,a as x,b as p,c as u,d}from"./select-n7gJbcBh.js";import{C as A}from"./checkbox-kCRj-5-c.js";import{t as D}from"./toaster-Cu2chk5i.js";import{S as h}from"./app-header-mm-x4RWr.js";import{A as L}from"./arrow-left-DMYwD5jw.js";import{S as O}from"./save-B6JBzQ3N.js";import"./app-BdS5R-hd.js";import"./index-BLM-rTOg.js";import"./check-B56l5uOV.js";import"./createLucideIcon-BSUHZ3TA.js";import"./index-YEfPdCwI.js";import"./wayfinder-FFrBTblC.js";import"./music-BLWdgfGs.js";import"./mail-DF_x1GrK.js";import"./lock-CcV1M-pd.js";import"./shield-BUWd6CUq.js";const V=[{value:"lunes",label:"Lunes"},{value:"martes",label:"Martes"},{value:"miércoles",label:"Miércoles"},{value:"jueves",label:"Jueves"},{value:"viernes",label:"Viernes"},{value:"sábado",label:"Sábado"},{value:"domingo",label:"Domingo"}];function te({schedule:t,programs:_,professors:g}){const f=t.days_of_week?t.days_of_week.split(",").map(s=>s.trim()):[],{data:r,setData:i,put:N,processing:j,errors:a,transform:y}=C({academic_program_id:t.academic_program_id.toString(),professor_id:t.professor_id?.toString()||"",name:t.name,description:t.description||"",days_of_week:f,start_time:t.start_time,end_time:t.end_time,classroom:t.classroom||"",semester:t.semester||"",max_students:t.max_students.toString(),status:t.status});y(s=>({...s,days_of_week:Array.isArray(s.days_of_week)?s.days_of_week.join(","):s.days_of_week})),w.useEffect(()=>{if(Object.keys(a).length>0){const s=Object.values(a)[0];D.error(s)}},[a]);const b=(s,o)=>{o?i("days_of_week",[...r.days_of_week,s]):i("days_of_week",r.days_of_week.filter(k=>k!==s))},S=s=>{s.preventDefault(),N(h.update({schedule:t.id}).url)};return e.jsx(E,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Editar Horario"}),e.jsxs("p",{className:"text-muted-foreground",children:["Editando: ",t.name]})]}),e.jsx(v,{href:h.index().url,children:e.jsxs(n,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Volver a Horarios"]})})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"academic_program_id",children:["Programa Académico ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{value:r.academic_program_id,onValueChange:s=>i("academic_program_id",s),children:[e.jsx(x,{id:"academic_program_id",children:e.jsx(p,{placeholder:"Selecciona un programa"})}),e.jsx(u,{children:_.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))})]}),a.academic_program_id&&e.jsx("p",{className:"text-sm text-destructive",children:a.academic_program_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"professor_id",children:"Profesor (Opcional)"}),e.jsxs(m,{value:r.professor_id||void 0,onValueChange:s=>i("professor_id",s),children:[e.jsx(x,{id:"professor_id",children:e.jsx(p,{placeholder:"Sin asignar - Selecciona un profesor"})}),e.jsx(u,{children:g.map(s=>e.jsxs(d,{value:s.id.toString(),children:[s.name," (",s.email,")"]},s.id))})]}),a.professor_id&&e.jsx("p",{className:"text-sm text-destructive",children:a.professor_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"name",children:["Nombre del Horario ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"name",type:"text",placeholder:"Ej: Matemáticas - Grupo A",value:r.name,onChange:s=>i("name",s.target.value)}),a.name&&e.jsx("p",{className:"text-sm text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Descripción (Opcional)"}),e.jsx(F,{id:"description",placeholder:"Descripción del horario...",rows:3,value:r.description,onChange:s=>i("description",s.target.value)}),a.description&&e.jsx("p",{className:"text-sm text-destructive",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["Días de la Semana ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 p-4 border rounded-lg",children:V.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:s.value,checked:r.days_of_week.includes(s.value),onCheckedChange:o=>b(s.value,o)}),e.jsx(l,{htmlFor:s.value,className:"cursor-pointer",children:s.label})]},s.value))}),a.days_of_week&&e.jsx("p",{className:"text-sm text-destructive",children:a.days_of_week})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"start_time",children:["Hora de Inicio ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"start_time",type:"time",value:r.start_time,onChange:s=>i("start_time",s.target.value)}),a.start_time&&e.jsx("p",{className:"text-sm text-destructive",children:a.start_time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"end_time",children:["Hora de Fin ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"end_time",type:"time",value:r.end_time,onChange:s=>i("end_time",s.target.value)}),a.end_time&&e.jsx("p",{className:"text-sm text-destructive",children:a.end_time})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"classroom",children:"Aula (Opcional)"}),e.jsx(c,{id:"classroom",type:"text",placeholder:"Ej: Aula 101",value:r.classroom,onChange:s=>i("classroom",s.target.value)}),a.classroom&&e.jsx("p",{className:"text-sm text-destructive",children:a.classroom})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"semester",children:"Semestre (Opcional)"}),e.jsx(c,{id:"semester",type:"text",placeholder:"Ej: 2025-1",value:r.semester,onChange:s=>i("semester",s.target.value)}),a.semester&&e.jsx("p",{className:"text-sm text-destructive",children:a.semester})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"max_students",children:["Cupo Máximo de Estudiantes ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"max_students",type:"number",min:"1",max:"200",placeholder:"Ej: 30",value:r.max_students,onChange:s=>i("max_students",s.target.value)}),a.max_students&&e.jsx("p",{className:"text-sm text-destructive",children:a.max_students})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"status",children:["Estado ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{value:r.status,onValueChange:s=>i("status",s),children:[e.jsx(x,{id:"status",children:e.jsx(p,{placeholder:"Selecciona un estado"})}),e.jsxs(u,{children:[e.jsx(d,{value:"active",children:"Activo"}),e.jsx(d,{value:"inactive",children:"Inactivo"}),e.jsx(d,{value:"completed",children:"Completado"})]})]}),a.status&&e.jsx("p",{className:"text-sm text-destructive",children:a.status})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(n,{type:"submit",disabled:j,className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),j?"Guardando...":"Guardar Cambios"]}),e.jsx(v,{href:h.index().url,children:e.jsx(n,{type:"button",variant:"outline",children:"Cancelar"})})]})]})]})})}export{te as default};
