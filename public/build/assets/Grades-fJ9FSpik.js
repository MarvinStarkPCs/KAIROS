import{r as p,j as e,U as f,H as Ae,L as _e,a as ye}from"./app-CskC5zpI.js";import{A as Ie}from"./app-layout-DBpMxMjR.js";import{C as b,a as A,b as _,c as y,d as q}from"./card-CjYBGHhU.js";import{B as I}from"./badge-wZTqG2x9.js";import{B as Re}from"./button-Ln_z6fUu.js";import{P as Y}from"./progress-5DSgAtpc.js";import{S as Pe,a as Ee,b as Se,c as ke,d as De}from"./select-CTAfelHo.js";import{c as X,b as V,a as Z,u as Te}from"./index-DKO42eCq.js";import{u as ee,c as Oe,a as Me,i as $e}from"./index-B3U3a8oW.js";import{u as se}from"./index-CNDk2MoS.js";import{P as R}from"./index-BP0c6JSM.js";import{P as Le}from"./index-FXNg9LRQ.js";import{c as B}from"./utils-CBfrqCZ4.js";import{C as Ve}from"./chevron-left-BHdGSrLh.js";import{G as Be}from"./graduation-cap-CNZvr81n.js";import{T as He}from"./trending-up-Cma2Ra-v.js";import{A as Ge}from"./award-CVOfvQUT.js";import{B as J}from"./app-header-CjVVaiqG.js";import{C as Q}from"./circle-check-big-BeJVkw6n.js";import{C as W}from"./clock-kSpICBAR.js";import{S as Fe}from"./star-DrwKoPPY.js";import{F as Ke}from"./file-text-OAVThfgg.js";import"./app-3tATqUqq.js";import"./toaster-DqNn9mIT.js";import"./index-Cbqf3fGf.js";import"./index-CdJFUDDL.js";import"./check-WNifdbqF.js";import"./createLucideIcon-BgVWJ3l5.js";import"./index-BtdFLURo.js";import"./index-BTBqsq4d.js";import"./wayfinder-FFrBTblC.js";import"./index-ChSmD2lF.js";import"./users-BnAHZaPn.js";import"./credit-card-BYVQbHwm.js";import"./calendar-CJejbeEX.js";import"./lock-DgRYFDVp.js";import"./shield-oxWIHUMV.js";import"./music-0YscbjcE.js";import"./mail-Btvbj2T2.js";var S="Collapsible",[Ue,te]=X(S),[ze,H]=Ue(S),re=p.forwardRef((t,l)=>{const{__scopeCollapsible:s,open:o,defaultOpen:a,disabled:n,onOpenChange:c,...d}=t,[r,i]=V({prop:o,defaultProp:a??!1,onChange:c,caller:S});return e.jsx(ze,{scope:s,disabled:n,contentId:ee(),open:r,onOpenToggle:p.useCallback(()=>i(x=>!x),[i]),children:e.jsx(R.div,{"data-state":F(r),"data-disabled":n?"":void 0,...d,ref:l})})});re.displayName=S;var ae="CollapsibleTrigger",oe=p.forwardRef((t,l)=>{const{__scopeCollapsible:s,...o}=t,a=H(ae,s);return e.jsx(R.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":F(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...o,ref:l,onClick:Z(t.onClick,a.onOpenToggle)})});oe.displayName=ae;var G="CollapsibleContent",ne=p.forwardRef((t,l)=>{const{forceMount:s,...o}=t,a=H(G,t.__scopeCollapsible);return e.jsx(Le,{present:s||a.open,children:({present:n})=>e.jsx(qe,{...o,ref:l,present:n})})});ne.displayName=G;var qe=p.forwardRef((t,l)=>{const{__scopeCollapsible:s,present:o,children:a,...n}=t,c=H(G,s),[d,r]=p.useState(o),i=p.useRef(null),x=se(l,i),u=p.useRef(0),C=u.current,g=p.useRef(0),P=g.current,j=c.open||d,v=p.useRef(j),N=p.useRef(void 0);return p.useEffect(()=>{const m=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(m)},[]),Te(()=>{const m=i.current;if(m){N.current=N.current||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const w=m.getBoundingClientRect();u.current=w.height,g.current=w.width,v.current||(m.style.transitionDuration=N.current.transitionDuration,m.style.animationName=N.current.animationName),r(o)}},[c.open,o]),e.jsx(R.div,{"data-state":F(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!j,...n,ref:x,style:{"--radix-collapsible-content-height":C?`${C}px`:void 0,"--radix-collapsible-content-width":P?`${P}px`:void 0,...t.style},children:j&&a})});function F(t){return t?"open":"closed"}var Ye=re,Je=oe,Qe=ne,h="Accordion",We=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[K,Xe,Ze]=Oe(h),[k,Js]=X(h,[Ze,te]),U=te(),ie=f.forwardRef((t,l)=>{const{type:s,...o}=t,a=o,n=o;return e.jsx(K.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?e.jsx(rs,{...n,ref:l}):e.jsx(ts,{...a,ref:l})})});ie.displayName=h;var[le,es]=k(h),[ce,ss]=k(h,{collapsible:!1}),ts=f.forwardRef((t,l)=>{const{value:s,defaultValue:o,onValueChange:a=()=>{},collapsible:n=!1,...c}=t,[d,r]=V({prop:s,defaultProp:o??"",onChange:a,caller:h});return e.jsx(le,{scope:t.__scopeAccordion,value:f.useMemo(()=>d?[d]:[],[d]),onItemOpen:r,onItemClose:f.useCallback(()=>n&&r(""),[n,r]),children:e.jsx(ce,{scope:t.__scopeAccordion,collapsible:n,children:e.jsx(de,{...c,ref:l})})})}),rs=f.forwardRef((t,l)=>{const{value:s,defaultValue:o,onValueChange:a=()=>{},...n}=t,[c,d]=V({prop:s,defaultProp:o??[],onChange:a,caller:h}),r=f.useCallback(x=>d((u=[])=>[...u,x]),[d]),i=f.useCallback(x=>d((u=[])=>u.filter(C=>C!==x)),[d]);return e.jsx(le,{scope:t.__scopeAccordion,value:c,onItemOpen:r,onItemClose:i,children:e.jsx(ce,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(de,{...n,ref:l})})})}),[as,D]=k(h),de=f.forwardRef((t,l)=>{const{__scopeAccordion:s,disabled:o,dir:a,orientation:n="vertical",...c}=t,d=f.useRef(null),r=se(d,l),i=Xe(s),u=Me(a)==="ltr",C=Z(t.onKeyDown,g=>{if(!We.includes(g.key))return;const P=g.target,j=i().filter($=>!$.ref.current?.disabled),v=j.findIndex($=>$.ref.current===P),N=j.length;if(v===-1)return;g.preventDefault();let m=v;const w=0,T=N-1,O=()=>{m=v+1,m>T&&(m=w)},M=()=>{m=v-1,m<w&&(m=T)};switch(g.key){case"Home":m=w;break;case"End":m=T;break;case"ArrowRight":n==="horizontal"&&(u?O():M());break;case"ArrowDown":n==="vertical"&&O();break;case"ArrowLeft":n==="horizontal"&&(u?M():O());break;case"ArrowUp":n==="vertical"&&M();break}const we=m%N;j[we].ref.current?.focus()});return e.jsx(as,{scope:s,disabled:o,direction:a,orientation:n,children:e.jsx(K.Slot,{scope:s,children:e.jsx(R.div,{...c,"data-orientation":n,ref:r,onKeyDown:o?void 0:C})})})}),E="AccordionItem",[os,z]=k(E),me=f.forwardRef((t,l)=>{const{__scopeAccordion:s,value:o,...a}=t,n=D(E,s),c=es(E,s),d=U(s),r=ee(),i=o&&c.value.includes(o)||!1,x=n.disabled||t.disabled;return e.jsx(os,{scope:s,open:i,disabled:x,triggerId:r,children:e.jsx(Ye,{"data-orientation":n.orientation,"data-state":ge(i),...d,...a,ref:l,disabled:x,open:i,onOpenChange:u=>{u?c.onItemOpen(o):c.onItemClose(o)}})})});me.displayName=E;var xe="AccordionHeader",pe=f.forwardRef((t,l)=>{const{__scopeAccordion:s,...o}=t,a=D(h,s),n=z(xe,s);return e.jsx(R.h3,{"data-orientation":a.orientation,"data-state":ge(n.open),"data-disabled":n.disabled?"":void 0,...o,ref:l})});pe.displayName=xe;var L="AccordionTrigger",ue=f.forwardRef((t,l)=>{const{__scopeAccordion:s,...o}=t,a=D(h,s),n=z(L,s),c=ss(L,s),d=U(s);return e.jsx(K.ItemSlot,{scope:s,children:e.jsx(Je,{"aria-disabled":n.open&&!c.collapsible||void 0,"data-orientation":a.orientation,id:n.triggerId,...d,...o,ref:l})})});ue.displayName=L;var fe="AccordionContent",he=f.forwardRef((t,l)=>{const{__scopeAccordion:s,...o}=t,a=D(h,s),n=z(fe,s),c=U(s);return e.jsx(Qe,{role:"region","aria-labelledby":n.triggerId,"data-orientation":a.orientation,...c,...o,ref:l,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});he.displayName=fe;function ge(t){return t?"open":"closed"}var ns=ie,is=me,ls=pe,je=ue,ve=he;const cs=ns,Ne=p.forwardRef(({className:t,...l},s)=>e.jsx(is,{ref:s,className:B("border-b",t),...l}));Ne.displayName="AccordionItem";const be=p.forwardRef(({className:t,children:l,...s},o)=>e.jsx(ls,{className:"flex",children:e.jsxs(je,{ref:o,className:B("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[l,e.jsx($e,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));be.displayName=je.displayName;const Ce=p.forwardRef(({className:t,children:l,...s},o)=>e.jsx(ve,{ref:o,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:B("pb-4 pt-0",t),children:l})}));Ce.displayName=ve.displayName;function Qs({enrollments:t,selectedProgramId:l,selectedProgram:s,modules:o,programStats:a}){const n=r=>{ye.get(`/estudiante/calificaciones/${r}`)},c=r=>r===null?"text-gray-400":r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600",d=r=>r===null?e.jsx(I,{variant:"outline",children:"Pendiente"}):r>=80?e.jsx(I,{className:"bg-green-500",children:"Excelente"}):r>=60?e.jsx(I,{className:"bg-yellow-500",children:"Aprobado"}):e.jsx(I,{variant:"destructive",children:"Necesita mejorar"});return e.jsxs(Ie,{children:[e.jsx(Ae,{title:"Mis Calificaciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx(_e,{href:"/estudiante/mi-portal",children:e.jsxs(Re,{variant:"ghost",size:"sm",className:"gap-1",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Volver"]})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Calificaciones"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Revisa tu progreso y calificaciones por programa"})]}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsxs(Pe,{value:l?.toString()||"",onValueChange:n,children:[e.jsx(Ee,{children:e.jsx(Se,{placeholder:"Selecciona un programa"})}),e.jsx(ke,{children:t.map(r=>e.jsx(De,{value:r.program_id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.program_color}}),r.program_name]})},r.program_id))})]})})]}),s?e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(_,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsx(y,{children:s.name}),s.description&&e.jsx(q,{className:"mt-1",children:s.description})]})]})})}),a&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(b,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Progreso General"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.overall_progress,"%"]}),e.jsx(Y,{value:a.overall_progress,className:"mt-2 h-2"})]})]}),e.jsxs(b,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Promedio General"}),e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:`text-2xl font-bold ${c(a.overall_average)}`,children:a.overall_average!==null?`${a.overall_average}%`:"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d(a.overall_average)})]})]}),e.jsxs(b,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Módulos"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total_modules}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"módulos en el programa"})]})]}),e.jsxs(b,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Actividades Evaluadas"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.evaluated_activities,e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",a.total_activities]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"actividades completadas"})]})]})]}),e.jsxs(b,{children:[e.jsxs(_,{children:[e.jsx(y,{children:"Módulos y Calificaciones"}),e.jsx(q,{children:"Desglose de tu progreso por módulo y actividad"})]}),e.jsx(A,{children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Este programa aún no tiene módulos configurados"})]}):e.jsx(cs,{type:"multiple",className:"w-full",children:o.map(r=>e.jsxs(Ne,{value:`module-${r.id}`,children:[e.jsx(be,{className:"hover:no-underline",children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:r.level}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.hours," horas • ",r.progress.evaluated,"/",r.progress.total," actividades"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.progress.average_score!==null&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${c(r.progress.average_score)}`,children:[r.progress.average_score,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"promedio"})]}),e.jsx("div",{className:"w-20",children:e.jsx(Y,{value:r.progress.percentage,className:"h-2"})})]})]})}),e.jsx(Ce,{children:e.jsxs("div",{className:"pl-11 space-y-3 pt-2",children:[r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r.description}),r.activities.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No hay actividades en este módulo"}):r.activities.map(i=>e.jsxs("div",{className:`p-4 rounded-lg border ${i.is_evaluated?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[i.is_evaluated?e.jsx(Q,{className:"h-5 w-5 text-green-500 mt-0.5"}):e.jsx(W,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:i.name}),i.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:i.description})]})]}),e.jsx("div",{className:"text-right",children:i.is_evaluated?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-lg font-bold ${c(i.percentage)}`,children:[i.percentage,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.points_earned,"/",i.total_max_points," pts"]})]}):e.jsx(I,{variant:"outline",children:"Pendiente"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3"}),"Peso: ",i.weight,"%"]}),i.evaluation_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),new Date(i.evaluation_date).toLocaleDateString("es-ES")]})]}),i.is_evaluated&&i.criteria_evaluations.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Desglose por criterio:"}),e.jsx("div",{className:"space-y-1",children:i.criteria_evaluations.map((x,u)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:x.criteria_name}),e.jsxs("span",{className:"font-medium",children:[x.points_earned,"/",x.max_points]})]},u))})]}),i.feedback&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Comentario del profesor:"}),e.jsx("p",{className:"text-sm text-blue-800",children:i.feedback})]})]})})]},i.id))]})})]},r.id))})})]})]}):e.jsx(b,{children:e.jsxs(A,{className:"py-12 text-center",children:[e.jsx(Be,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selecciona un programa"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Elige uno de tus programas académicos para ver tus calificaciones y progreso detallado."})]})})]})]})}export{Qs as default};
