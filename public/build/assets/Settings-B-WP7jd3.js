import{u as C,j as e,H as w}from"./app-DS3XsqEZ.js";import{H as x}from"./heading-small-cLzeB4lF.js";import{I as d}from"./input-error-D1uqBNg0.js";import{B as P}from"./button-B1e-AMvH.js";import{I as o}from"./input-jSZpJp5c.js";import{L as i}from"./label-DVYcV-OP.js";import{S as c}from"./switch-CS2ng3v6.js";import{A as L}from"./app-layout-jDJ60CM8.js";import{s as T}from"./app-header-B9YO6fFf.js";import{U as m}from"./users-D0n3l_ee.js";import{C as $}from"./credit-card-CG29_pKq.js";import{B as M}from"./banknote-ruI7-Xxd.js";import{T as g}from"./triangle-alert-C5F4p9-Q.js";import{c as h}from"./createLucideIcon-CDm0GSF8.js";import{D}from"./dollar-sign-JMumnRM0.js";/* empty css            */import"./utils-CXgVrZ_A.js";import"./index-C1zl3AKF.js";import"./index-BGLTVUfG.js";import"./index-CNXn2kmk.js";import"./index-SalYN_vT.js";import"./index-CbjShBpi.js";import"./index-BSFzQkJ5.js";import"./toaster-B63BtNr_.js";import"./chevron-right-BKj6_V_o.js";import"./index-DSW0ah-P.js";import"./index-CLa6oRL-.js";import"./wayfinder-Bf9OnZdi.js";import"./index-B3zDr7qY.js";import"./graduation-cap-D6NhGYmE.js";import"./calendar-CU4UlK9S.js";import"./file-text-CqlDkYrG.js";import"./lock-pyde7PLs.js";import"./shield-CQP0rKaF.js";import"./loader-circle-BegcMASd.js";import"./mail-DPit2bkd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],E=h("Percent",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],A=h("Tag",S),q=[{title:"Configuración de Pagos",href:T().url}],u=[{key:"amount_linaje_kids",name:"Linaje Kids",description:"Niños de 4 a 9 años",color:"amber"},{key:"amount_linaje_teens",name:"Linaje Teens",description:"Niños y adolescentes de 10 a 17 años",color:"blue"},{key:"amount_linaje_big",name:"Linaje Big",description:"Adultos de 18 años en adelante",color:"green"}];function fe({paymentSetting:n}){const{data:a,setData:t,patch:b,processing:p,errors:l}=C({amount_linaje_kids:n?.amount_linaje_kids??"100000",amount_linaje_teens:n?.amount_linaje_teens??"100000",amount_linaje_big:n?.amount_linaje_big??"100000",is_active:n?.is_active??!0,enable_online_payment:n?.enable_online_payment??!0,enable_manual_payment:n?.enable_manual_payment??!0,discount_min_students:n?.discount_min_students??3,discount_percentage:n?.discount_percentage??"0"}),j=s=>{!s&&!a.enable_manual_payment||t("enable_online_payment",s)},_=s=>{!s&&!a.enable_online_payment||t("enable_manual_payment",s)},f=s=>{s.preventDefault(),b("/pagos/settings",{preserveScroll:!0})},N=(s,r)=>{switch(s){case"amber":return"bg-amber-500 text-white";case"blue":return"bg-blue-500 text-white";case"green":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},v=s=>{switch(s){case"amber":return"border-amber-200 bg-amber-50/50";case"blue":return"border-blue-200 bg-blue-50/50";case"green":return"border-green-200 bg-green-50/50";default:return""}};return e.jsxs(L,{breadcrumbs:q,children:[e.jsx(w,{title:"Configuración de Pagos"}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(x,{title:"Configuración de Pagos",description:"Configura los montos de pago por modalidad y otros parámetros"}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-semibold",children:"Montos por Modalidad"})]}),e.jsx("p",{className:"text-sm text-muted-foreground -mt-4",children:"Configura el monto de pago para cada modalidad. Cada estudiante pagará según su grupo de edad."}),e.jsx("div",{className:"grid gap-4",children:u.map(s=>e.jsx("div",{className:`rounded-lg border p-4 ${v(s.color)}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${N(s.color)}`,children:e.jsx(m,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:s.key,className:"text-base font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"$"}),e.jsx(o,{id:s.key,type:"number",min:"1500",step:"1",className:"w-36 text-right font-semibold",value:a[s.key],onChange:r=>t(s.key,r.target.value),placeholder:"100000",required:!0}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"COP"})]}),e.jsx(d,{message:l[s.key]})]})]})},s.key))}),e.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium",children:"Vista Previa de Montos"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:u.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.name}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",Number(a[s.key]).toLocaleString("es-CO")]})]},s.key))})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"is_active",children:"Configuración activa"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Habilita esta configuración para aplicar los montos a nuevas matrículas"})]}),e.jsx(c,{id:"is_active",checked:a.is_active,onCheckedChange:s=>t("is_active",s)})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",children:"Métodos de Pago"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona los métodos de pago disponibles para las matrículas. Debe haber al menos uno activo."})]}),e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-4 transition-colors ${a.enable_online_payment?"border-amber-300 bg-amber-50/50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.enable_online_payment?"bg-amber-500 text-white":"bg-gray-100 text-gray-400"}`,children:e.jsx($,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"enable_online_payment",children:"Pago en Línea (Wompi)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tarjeta de crédito, débito, PSE, Nequi"})]})]}),e.jsx(c,{id:"enable_online_payment",checked:a.enable_online_payment,onCheckedChange:j,disabled:a.enable_online_payment&&!a.enable_manual_payment})]}),e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-4 transition-colors ${a.enable_manual_payment?"border-green-300 bg-green-50/50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.enable_manual_payment?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:e.jsx(M,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"enable_manual_payment",children:"Pago Manual"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transferencia bancaria o efectivo en instalaciones"})]})]}),e.jsx(c,{id:"enable_manual_payment",checked:a.enable_manual_payment,onCheckedChange:_,disabled:a.enable_manual_payment&&!a.enable_online_payment})]}),(!a.enable_online_payment||!a.enable_manual_payment)&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-amber-50 border border-amber-200 p-3 text-sm text-amber-800",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{children:["Solo el método de ",e.jsx("strong",{children:a.enable_online_payment?"pago en línea":"pago manual"})," estará disponible para los estudiantes."]})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-semibold",children:"Descuento por Múltiples Estudiantes"})]}),e.jsx("p",{className:"text-sm text-muted-foreground -mt-2",children:"Configura un descuento automático cuando un responsable matricula varios estudiantes a la vez."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 border-purple-200 bg-purple-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-500 text-white",children:e.jsx(m,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"discount_min_students",className:"text-base font-medium",children:"Mínimo de estudiantes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"A partir de cuántos estudiantes aplica"})]})]}),e.jsx(o,{id:"discount_min_students",type:"number",min:"2",max:"20",step:"1",className:"w-full text-center font-semibold text-lg",value:a.discount_min_students,onChange:s=>t("discount_min_students",parseInt(s.target.value)||2),required:!0}),e.jsx(d,{message:l.discount_min_students})]}),e.jsxs("div",{className:"rounded-lg border p-4 border-purple-200 bg-purple-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-500 text-white",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"discount_percentage",className:"text-base font-medium",children:"Porcentaje de descuento"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Descuento aplicado a cada matrícula"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{id:"discount_percentage",type:"number",min:"0",max:"100",step:"0.5",className:"w-full text-center font-semibold text-lg",value:a.discount_percentage,onChange:s=>t("discount_percentage",s.target.value),required:!0}),e.jsx("span",{className:"text-lg font-semibold text-muted-foreground",children:"%"})]}),e.jsx(d,{message:l.discount_percentage})]})]}),Number(a.discount_percentage)>0&&e.jsxs("div",{className:"rounded-lg bg-purple-50 border border-purple-200 p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Vista Previa del Descuento"}),e.jsxs("p",{className:"text-sm text-purple-800",children:["Si un responsable matricula ",e.jsxs("strong",{children:[a.discount_min_students," o más estudiantes"]}),", cada uno recibe un ",e.jsxs("strong",{children:[Number(a.discount_percentage),"% de descuento"]}),"."]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 pt-2",children:u.map(s=>{const r=Number(a[s.key]),y=r*(Number(a.discount_percentage)/100),k=r-y;return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-purple-600 mb-1",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground line-through",children:["$",r.toLocaleString("es-CO")]}),e.jsxs("p",{className:"text-base font-bold text-purple-700",children:["$",Math.round(k).toLocaleString("es-CO")]})]},s.key)})})]}),Number(a.discount_percentage)===0&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-50 border border-gray-200 p-3 text-sm text-gray-600",children:[e.jsx(g,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:"El descuento está desactivado. Establece un porcentaje mayor a 0 para activarlo."})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(P,{type:"submit",disabled:p,children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),p?"Guardando...":"Guardar Configuración"]})})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-6 space-y-4",children:[e.jsx(x,{title:"Información Importante",description:"Ten en cuenta lo siguiente sobre la configuración de pagos"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Kids:"})," Para niños de 4 a 9 años de edad."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Teens:"})," Para niños y adolescentes de 10 a 17 años de edad."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Linaje Big:"})," Para adultos de 18 años en adelante (se asigna automáticamente)."]}),e.jsxs("li",{children:["Los montos configurados se aplicarán a todas las ",e.jsx("strong",{children:"nuevas matrículas"})," según la modalidad seleccionada."]}),e.jsx("li",{children:"Los pagos ya existentes no se verán afectados por estos cambios."}),e.jsx("li",{children:"El monto mínimo permitido es de $1,500 COP (requerido por Wompi)."}),e.jsxs("li",{children:[e.jsx("strong",{children:"Descuento:"})," Se aplica automáticamente cuando un responsable matricula el número mínimo de estudiantes configurado."]}),e.jsxs("li",{children:["El descuento se aplica a ",e.jsx("strong",{children:"cada matrícula"})," individual, no al total."]})]})]})]})})]})}export{fe as default};
