import{r as v,b as ie,u as te,j as e,H as oe}from"./app-BMqdw8uR.js";import{B as V}from"./button-BUnJOvyd.js";import{I as x}from"./input-BANKgoh6.js";import{L as l}from"./label-CRU0Gvn8.js";import{T as q}from"./textarea-DuulWC0r.js";import{R as w,a as b}from"./radio-group-UTR6Xh0_.js";import{C as Q}from"./checkbox-DZeCtTD2.js";import{C as F,d as I,a as O,b as T,c as M}from"./card-B1tZWUfE.js";import{S as y,a as N,b as C,c as S,d as m}from"./select-KVvHCjA5.js";import{I as c}from"./input-error-BwRRCfCp.js";import{c as k}from"./index-Dt0e-YSB.js";import{T as de}from"./toaster-BsEf9V9_.js";import{T as D,M as Y,D as ce,G as K}from"./matricula-8YZRtE08.js";import{i as me}from"./matricula-validation-DUox7LH5.js";import{D as xe}from"./DocumentTypeSelect-C5k_GRxY.js";import{C as U}from"./circle-alert-q3eqA7B6.js";import{C as L}from"./check-C2iLavJ3.js";import{C as he}from"./chevron-left-B5CfoUf3.js";import{C as pe}from"./chevron-right-nrYwNzTP.js";import{C as W}from"./circle-check-big-CMchNm1B.js";import{P as ue}from"./plus-C_X0hlzE.js";import{U as je}from"./user-CW0J4ZW2.js";import{T as ge}from"./trash-2-G-HiSrsz.js";import"./app-G9b-nQ8q.js";import"./index-ESANKQPc.js";import"./index-Cc3ftZfl.js";import"./index-D6ZvRaEz.js";import"./index-B6FkDbgX.js";import"./index-DvabNQLv.js";import"./createLucideIcon-Dv5u1mWo.js";import"./index-G2KbbbrW.js";function be(h=[]){const[d,f]=v.useState(h),[_,A]=v.useState(0),$=d[_],i=v.useCallback(()=>({name:"",last_name:"",email:"",document_type:"TI",document_number:"",birth_place:"",birth_date:"",gender:"M",datos_musicales:{plays_instrument:!1,instruments_played:"",has_music_studies:!1,music_schools:"",desired_instrument:"",modality:"",current_level:1},program_id:"",schedule_id:""}),[]),P=v.useCallback(()=>{const j=[...d,i()];return f(j),A(j.length-1),j},[d,i]),R=v.useCallback(j=>{const a=d.filter((o,g)=>g!==j);return f(a),_>=a.length&&A(Math.max(0,a.length-1)),a},[d,_]),B=v.useCallback((j,a,o)=>{const g=[...d];return g[j]={...g[j],[a]:o},f(g),g},[d]),H=v.useCallback((j,a,o)=>{const g=[...d];return g[j]={...g[j],datos_musicales:{...g[j].datos_musicales,[a]:o}},f(g),g},[d]),G=v.useCallback(j=>{f(j)},[]);return{students:d,currentIndex:_,currentStudent:$,setCurrentIndex:A,createNewStudent:i,addStudent:P,removeStudent:R,updateStudentField:B,updateMusicalData:H,setStudentsData:G}}function Ke({programs:h}){const[d,f]=v.useState(1),{props:_}=ie();v.useEffect(()=>{console.log("üì¨ Props flash:",_.flash),_.flash?.error&&console.log("üî¥ ERROR FLASH RECIBIDO:",_.flash.error),_.flash?.success&&console.log("‚úÖ SUCCESS FLASH RECIBIDO:",_.flash.success)},[_.flash]);const A=be(),{students:$,currentIndex:i,setCurrentIndex:P,createNewStudent:R,addStudent:B,removeStudent:H,updateStudent:G,setStudentsData:j}=A,{data:a,setData:o,post:g,processing:J,errors:r}=te({responsable:{name:"",last_name:"",email:"",password:"",password_confirmation:"",document_type:"CC",document_number:"",birth_place:"",birth_date:"",gender:"M",address:"",neighborhood:"",phone:"",mobile:"",city:"",department:"",plays_instrument:!1,instruments_played:"",has_music_studies:!1,music_schools:"",desired_instrument:"",modality:"",current_level:1,program_id:"",schedule_id:""},is_minor:!1,estudiantes:$,parental_authorization:!1,payment_commitment:!1});v.useEffect(()=>{console.log("üîç Errors actualizados:",r),console.log("üîç Cantidad de errores:",Object.keys(r).length),Object.keys(r).length>0&&console.log("üîç Primer error:",Object.entries(r)[0])},[r]);const X=()=>{const n=B();o("estudiantes",n)},Z=n=>{const s=H(n);o("estudiantes",s)},p=(n,s,t)=>{const u=G(n,s,t);o("estudiantes",u)},E=n=>me(n,a),ee=()=>{d<D&&(window.scrollTo({top:0,behavior:"smooth"}),f(d+1))},se=()=>{d>1&&(window.scrollTo({top:0,behavior:"smooth"}),f(d-1))},ae=n=>{n>=1&&n<=D&&(window.scrollTo({top:0,behavior:"smooth"}),f(n))},re=n=>{n.preventDefault(),console.log("Enviando formulario con datos:",a),g("/matricula",{preserveScroll:!0,preserveState:!0,transform:s=>{const t={responsable:s.responsable,is_minor:s.is_minor,payment_commitment:s.payment_commitment};return console.log("üîç Valor de is_minor antes del transform:",s.is_minor,typeof s.is_minor),s.is_minor?(t.estudiantes=s.estudiantes,t.parental_authorization=s.parental_authorization,console.log("‚úÖ Incluyendo estudiantes:",t.estudiantes.length)):console.log("‚ùå NO incluyendo estudiantes (adulto)"),console.log("üì¶ Datos finales a enviar:",t),console.log("üì¶ ¬øTiene campo estudiantes?","estudiantes"in t),t},onError:s=>{console.log("‚ùå onError callback ejecutado"),console.log("‚ùå Errores recibidos:",s),console.log("‚ùå Cantidad de errores:",Object.keys(s).length),console.log("‚ùå Lista de campos con error:",Object.keys(s)),Object.entries(s).forEach(([t,u])=>{console.log(`  - ${t}: ${u}`)}),window.scrollTo({top:0,behavior:"smooth"}),f(1)},onSuccess:()=>{console.log("Matr√≠cula completada exitosamente")}})},ne=()=>{switch(d){case 1:return e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:"Datos del Responsable"}),e.jsx(M,{children:"Ingrese los datos de la persona responsable de la matr√≠cula"})]}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_name",children:"Nombre *"}),e.jsx(x,{id:"responsable_name",value:a.responsable.name,onChange:s=>o("responsable",{...a.responsable,name:s.target.value}),placeholder:"Nombre","aria-invalid":!!r["responsable.name"]}),e.jsx(c,{message:r["responsable.name"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_last_name",children:"Apellidos *"}),e.jsx(x,{id:"responsable_last_name",value:a.responsable.last_name,onChange:s=>o("responsable",{...a.responsable,last_name:s.target.value}),placeholder:"Apellidos","aria-invalid":!!r["responsable.last_name"]}),e.jsx(c,{message:r["responsable.last_name"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(xe,{value:a.responsable.document_type,onChange:s=>o("responsable",{...a.responsable,document_type:s}),error:r["responsable.document_type"]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"responsable_document_number",children:"N√∫mero de Documento *"}),e.jsx(x,{id:"responsable_document_number",value:a.responsable.document_number,onChange:s=>o("responsable",{...a.responsable,document_number:s.target.value}),placeholder:"N√∫mero de documento","aria-invalid":!!r["responsable.document_number"]}),e.jsx(c,{message:r["responsable.document_number"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_birth_place",children:"Lugar de Nacimiento"}),e.jsx(x,{id:"responsable_birth_place",value:a.responsable.birth_place,onChange:s=>o("responsable",{...a.responsable,birth_place:s.target.value}),placeholder:"Ciudad de nacimiento","aria-invalid":!!r["responsable.birth_place"]}),e.jsx(c,{message:r["responsable.birth_place"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_birth_date",children:"Fecha de Nacimiento *"}),e.jsx(x,{id:"responsable_birth_date",type:"date",value:a.responsable.birth_date,onChange:s=>o("responsable",{...a.responsable,birth_date:s.target.value}),max:new Date().toISOString().split("T")[0],"aria-invalid":!!r["responsable.birth_date"]}),e.jsx(c,{message:r["responsable.birth_date"]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"G√©nero *"}),e.jsx(w,{value:a.responsable.gender,onValueChange:s=>o("responsable",{...a.responsable,gender:s}),className:"flex gap-4 mt-2",children:Object.entries(K).map(([s,t])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:s,id:`gender_${s}`}),e.jsx(l,{htmlFor:`gender_${s}`,children:t})]},s))}),e.jsx(c,{message:r["responsable.gender"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_email",children:"Correo Electr√≥nico *"}),e.jsx(x,{id:"responsable_email",type:"email",value:a.responsable.email,onChange:s=>o("responsable",{...a.responsable,email:s.target.value}),placeholder:"correo@ejemplo.com","aria-invalid":!!r["responsable.email"]}),e.jsx(c,{message:r["responsable.email"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_phone",children:"Tel√©fono Fijo"}),e.jsx(x,{id:"responsable_phone",value:a.responsable.phone,onChange:s=>o("responsable",{...a.responsable,phone:s.target.value}),placeholder:"607 123 4567","aria-invalid":!!r["responsable.phone"]}),e.jsx(c,{message:r["responsable.phone"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_mobile",children:"Celular *"}),e.jsx(x,{id:"responsable_mobile",value:a.responsable.mobile,onChange:s=>o("responsable",{...a.responsable,mobile:s.target.value}),placeholder:"300 123 4567","aria-invalid":!!r["responsable.mobile"]}),e.jsx(c,{message:r["responsable.mobile"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_password",children:"Contrase√±a *"}),e.jsx(x,{id:"responsable_password",type:"password",value:a.responsable.password,onChange:s=>o("responsable",{...a.responsable,password:s.target.value}),placeholder:"M√≠nimo 8 caracteres","aria-invalid":!!r["responsable.password"]}),e.jsx(c,{message:r["responsable.password"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_password_confirmation",children:"Confirmar Contrase√±a *"}),e.jsx(x,{id:"responsable_password_confirmation",type:"password",value:a.responsable.password_confirmation,onChange:s=>o("responsable",{...a.responsable,password_confirmation:s.target.value}),placeholder:"Repita la contrase√±a","aria-invalid":!!r["responsable.password_confirmation"]}),e.jsx(c,{message:r["responsable.password_confirmation"]})]})]})]})]});case 2:return e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:"Datos de Localizaci√≥n"}),e.jsx(M,{children:"Ingrese la direcci√≥n de residencia del responsable"})]}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_address",children:"Direcci√≥n *"}),e.jsx(x,{id:"responsable_address",value:a.responsable.address,onChange:s=>o("responsable",{...a.responsable,address:s.target.value}),placeholder:"Calle 123 #45-67","aria-invalid":!!r["responsable.address"]}),e.jsx(c,{message:r["responsable.address"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_neighborhood",children:"Barrio"}),e.jsx(x,{id:"responsable_neighborhood",value:a.responsable.neighborhood,onChange:s=>o("responsable",{...a.responsable,neighborhood:s.target.value}),placeholder:"Nombre del barrio","aria-invalid":!!r["responsable.neighborhood"]}),e.jsx(c,{message:r["responsable.neighborhood"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_city",children:"Ciudad *"}),e.jsx(x,{id:"responsable_city",value:a.responsable.city,onChange:s=>o("responsable",{...a.responsable,city:s.target.value}),placeholder:"Ej: Oca√±a, C√∫cuta, Bogot√°","aria-invalid":!!r["responsable.city"]}),e.jsx(c,{message:r["responsable.city"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"responsable_department",children:"Departamento *"}),e.jsxs(y,{value:a.responsable.department,onValueChange:s=>o("responsable",{...a.responsable,department:s}),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione departamento"})}),e.jsxs(S,{children:[e.jsx(m,{value:"Norte de Santander",children:"Norte de Santander"}),e.jsx(m,{value:"Santander",children:"Santander"}),e.jsx(m,{value:"Cundinamarca",children:"Cundinamarca"}),e.jsx(m,{value:"Antioquia",children:"Antioquia"}),e.jsx(m,{value:"Valle del Cauca",children:"Valle del Cauca"}),e.jsx(m,{value:"Atl√°ntico",children:"Atl√°ntico"}),e.jsx(m,{value:"Bol√≠var",children:"Bol√≠var"}),e.jsx(m,{value:"Boyac√°",children:"Boyac√°"}),e.jsx(m,{value:"Caldas",children:"Caldas"}),e.jsx(m,{value:"Cesar",children:"Cesar"}),e.jsx(m,{value:"C√≥rdoba",children:"C√≥rdoba"}),e.jsx(m,{value:"Huila",children:"Huila"}),e.jsx(m,{value:"Magdalena",children:"Magdalena"}),e.jsx(m,{value:"Meta",children:"Meta"}),e.jsx(m,{value:"Nari√±o",children:"Nari√±o"}),e.jsx(m,{value:"Quind√≠o",children:"Quind√≠o"}),e.jsx(m,{value:"Risaralda",children:"Risaralda"}),e.jsx(m,{value:"Tolima",children:"Tolima"}),e.jsx(m,{value:"Otro",children:"Otro"})]})]}),e.jsx(c,{message:r["responsable.department"]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx(l,{className:"text-lg font-semibold",children:"¬øLa matr√≠cula es para un menor de edad?"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:"Si la matr√≠cula es para uno o m√°s menores de edad, deber√° ingresar los datos de cada estudiante en el siguiente paso."}),e.jsxs(w,{value:a.is_minor?"yes":"no",onValueChange:s=>{const t=s==="yes";if(t&&$.length===0){const u=R();j([u]),o({...a,is_minor:!0,estudiantes:[u]}),P(0)}else o("is_minor",t)},className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"no",id:"is_minor_no"}),e.jsx(l,{htmlFor:"is_minor_no",children:"No, soy yo quien estudiar√°"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"yes",id:"is_minor_yes"}),e.jsx(l,{htmlFor:"is_minor_yes",children:"S√≠, es para uno o m√°s menores"})]})]}),e.jsx(c,{message:r.is_minor})]})]})]});case 3:if(!a.is_minor)return e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:"Datos Musicales y Programa"}),e.jsx(M,{children:"Completa tu informaci√≥n musical y selecciona el programa al que deseas inscribirte"})]}),e.jsxs(I,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Experiencia Musical"}),e.jsxs("div",{children:[e.jsx(l,{children:"¬øEjecutas alg√∫n instrumento?"}),e.jsxs(w,{value:a.responsable.plays_instrument?"yes":"no",onValueChange:s=>o("responsable",{...a.responsable,plays_instrument:s==="yes"}),className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"yes",id:"adult_plays_yes"}),e.jsx(l,{htmlFor:"adult_plays_yes",children:"S√≠"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"no",id:"adult_plays_no"}),e.jsx(l,{htmlFor:"adult_plays_no",children:"No"})]})]})]}),a.responsable.plays_instrument&&e.jsxs("div",{children:[e.jsx(l,{children:"Indique cu√°l o cu√°les instrumentos"}),e.jsx(q,{value:a.responsable.instruments_played||"",onChange:s=>o("responsable",{...a.responsable,instruments_played:s.target.value}),placeholder:"Ej: Piano, Guitarra, Canto",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{children:"¬øTienes estudios formales de m√∫sica?"}),e.jsxs(w,{value:a.responsable.has_music_studies?"yes":"no",onValueChange:s=>o("responsable",{...a.responsable,has_music_studies:s==="yes"}),className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"yes",id:"adult_studies_yes"}),e.jsx(l,{htmlFor:"adult_studies_yes",children:"S√≠"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"no",id:"adult_studies_no"}),e.jsx(l,{htmlFor:"adult_studies_no",children:"No"})]})]})]}),a.responsable.has_music_studies&&e.jsxs("div",{children:[e.jsx(l,{children:"Nombre(s) de escuela(s)"}),e.jsx(q,{value:a.responsable.music_schools||"",onChange:s=>o("responsable",{...a.responsable,music_schools:s.target.value}),placeholder:"Ej: Conservatorio Nacional",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Instrumento que deseas estudiar *"}),e.jsx(x,{value:a.responsable.desired_instrument||"",onChange:s=>o("responsable",{...a.responsable,desired_instrument:s.target.value}),placeholder:"Ej: Piano, Guitarra, Canto"}),e.jsx(c,{message:r["responsable.desired_instrument"]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Modalidad *"}),e.jsxs(y,{value:a.responsable.modality,onValueChange:s=>o("responsable",{...a.responsable,modality:s}),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione una modalidad"})}),e.jsx(S,{children:Object.entries(Y).filter(([s])=>s!=="").map(([s,t])=>e.jsx(m,{value:s,children:t},s))})]}),e.jsx(c,{message:r["responsable.modality"]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Nivel a inscribirse *"}),e.jsx(x,{type:"number",min:"1",max:"10",value:a.responsable.current_level||1,onChange:s=>o("responsable",{...a.responsable,current_level:parseInt(s.target.value)||1})}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Si eres principiante, deja el nivel en 1"}),e.jsx(c,{message:r["responsable.current_level"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Programa Acad√©mico"}),e.jsxs("div",{children:[e.jsx(l,{children:"Programa Acad√©mico *"}),e.jsxs(y,{value:a.responsable.program_id,onValueChange:s=>o("responsable",{...a.responsable,program_id:s}),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione un programa"})}),e.jsx(S,{children:h.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(c,{message:r["responsable.program_id"]})]}),a.responsable.program_id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:h.find(s=>s.id.toString()===a.responsable.program_id)?.name}),e.jsx("p",{className:"text-sm text-gray-700",children:h.find(s=>s.id.toString()===a.responsable.program_id)?.description})]}),h.find(s=>s.id.toString()===a.responsable.program_id)?.schedules&&h.find(s=>s.id.toString()===a.responsable.program_id).schedules.length>0&&e.jsxs("div",{children:[e.jsx(l,{children:"Horario (Opcional)"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Selecciona un horario si deseas inscribirte en una clase espec√≠fica"}),e.jsxs(y,{value:a.responsable.schedule_id||void 0,onValueChange:s=>o("responsable",{...a.responsable,schedule_id:s||""}),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione un horario (opcional)"})}),e.jsx(S,{children:h.find(s=>s.id.toString()===a.responsable.program_id).schedules.filter(s=>s.has_capacity).map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.days_of_week," | ",s.start_time," - ",s.end_time," | Prof. ",s.professor.name," | Cupos: ",s.available_slots]},s.id))})]})]})]})]})]})]});const n=a.estudiantes[i];return e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:"Datos de los Estudiantes"}),e.jsx(M,{children:"Ingrese los datos de cada estudiante menor de edad que desea matricular"})]}),e.jsxs(I,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:a.estudiantes.length===1?"1 Estudiante":`${a.estudiantes.length} Estudiantes`}),e.jsxs(V,{type:"button",variant:"outline",size:"sm",onClick:X,className:"flex items-center gap-2 text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(ue,{className:"h-4 w-4"}),"Agregar Hijo/a"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.estudiantes.map((s,t)=>{const u=s.name&&s.last_name&&s.document_number&&s.program_id,z=i===t;return e.jsxs("div",{className:k("relative flex items-center gap-2 rounded-lg border-2 transition-all",z?"border-amber-500 bg-amber-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300"),children:[e.jsxs("button",{type:"button",onClick:()=>P(t),className:"flex items-center gap-2 px-4 py-2 flex-1",children:[e.jsx("div",{className:k("w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold",z?"bg-amber-600 text-white":u?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:u&&!z?e.jsx(L,{className:"h-4 w-4"}):e.jsx(je,{className:"h-4 w-4"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:k("text-sm font-medium",z?"text-amber-900":"text-gray-700"),children:s.name||`Estudiante ${t+1}`}),s.program_id&&e.jsx("p",{className:"text-xs text-gray-500",children:h.find(le=>le.id.toString()===s.program_id)?.name})]})]}),a.estudiantes.length>1&&e.jsx("button",{type:"button",onClick:()=>Z(t),className:"h-full px-3 border-l-2 border-gray-200 text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors",title:"Eliminar estudiante",children:e.jsx(ge,{className:"h-4 w-4"})})]},t)})})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Nombre *"}),e.jsx(x,{value:n.name,onChange:s=>p(i,"name",s.target.value),placeholder:"Nombre"}),e.jsx(c,{message:r[`estudiantes.${i}.name`]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Apellidos *"}),e.jsx(x,{value:n.last_name,onChange:s=>p(i,"last_name",s.target.value),placeholder:"Apellidos"}),e.jsx(c,{message:r[`estudiantes.${i}.last_name`]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Tipo de Documento *"}),e.jsxs(y,{value:n.document_type,onValueChange:s=>p(i,"document_type",s),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione"})}),e.jsx(S,{children:Object.entries(ce).map(([s,t])=>e.jsx(m,{value:s,children:t},s))})]}),e.jsx(c,{message:r[`estudiantes.${i}.document_type`]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{children:"N√∫mero de Documento *"}),e.jsx(x,{value:n.document_number,onChange:s=>p(i,"document_number",s.target.value),placeholder:"N√∫mero de documento"}),e.jsx(c,{message:r[`estudiantes.${i}.document_number`]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Lugar de Nacimiento"}),e.jsx(x,{value:n.birth_place,onChange:s=>p(i,"birth_place",s.target.value),placeholder:"Ciudad de nacimiento"}),e.jsx(c,{message:r[`estudiantes.${i}.birth_place`]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Fecha de Nacimiento *"}),e.jsx(x,{type:"date",value:n.birth_date,onChange:s=>p(i,"birth_date",s.target.value),max:new Date().toISOString().split("T")[0]}),e.jsx(c,{message:r[`estudiantes.${i}.birth_date`]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"G√©nero *"}),e.jsx(w,{value:n.gender,onValueChange:s=>p(i,"gender",s),className:"flex gap-4 mt-2",children:Object.entries(K).map(([s,t])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:s,id:`gender_${s}_${i}`}),e.jsx(l,{htmlFor:`gender_${s}_${i}`,children:t})]},s))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Correo Electr√≥nico del Estudiante (Opcional)"}),e.jsx(x,{type:"email",value:n.email,onChange:s=>p(i,"email",s.target.value),placeholder:"correo@ejemplo.com"}),e.jsx(c,{message:r[`estudiantes.${i}.email`]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Si el estudiante tiene correo, podr√° acceder para ver su avance"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Datos Musicales"}),e.jsxs("div",{children:[e.jsx(l,{children:"¬øEjecuta alg√∫n instrumento?"}),e.jsxs(w,{value:n.datos_musicales.plays_instrument?"yes":"no",onValueChange:s=>p(i,"datos_musicales.plays_instrument",s==="yes"),className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"yes",id:`plays_yes_${i}`}),e.jsx(l,{htmlFor:`plays_yes_${i}`,children:"S√≠"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"no",id:`plays_no_${i}`}),e.jsx(l,{htmlFor:`plays_no_${i}`,children:"No"})]})]})]}),n.datos_musicales.plays_instrument&&e.jsxs("div",{children:[e.jsx(l,{children:"Indique cu√°l o cu√°les instrumentos"}),e.jsx(q,{value:n.datos_musicales.instruments_played,onChange:s=>p(i,"datos_musicales.instruments_played",s.target.value),placeholder:"Ej: Piano, Guitarra, Canto",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{children:"¬øTiene estudios formales de m√∫sica?"}),e.jsxs(w,{value:n.datos_musicales.has_music_studies?"yes":"no",onValueChange:s=>p(i,"datos_musicales.has_music_studies",s==="yes"),className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"yes",id:`studies_yes_${i}`}),e.jsx(l,{htmlFor:`studies_yes_${i}`,children:"S√≠"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{value:"no",id:`studies_no_${i}`}),e.jsx(l,{htmlFor:`studies_no_${i}`,children:"No"})]})]})]}),n.datos_musicales.has_music_studies&&e.jsxs("div",{children:[e.jsx(l,{children:"Nombre(s) de escuela(s)"}),e.jsx(q,{value:n.datos_musicales.music_schools,onChange:s=>p(i,"datos_musicales.music_schools",s.target.value),placeholder:"Ej: Conservatorio Nacional",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Instrumento que desea estudiar *"}),e.jsx(x,{value:n.datos_musicales.desired_instrument,onChange:s=>p(i,"datos_musicales.desired_instrument",s.target.value),placeholder:"Ej: Piano, Guitarra, Canto"}),e.jsx(c,{message:r[`estudiantes.${i}.datos_musicales.desired_instrument`]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Modalidad seg√∫n edad *"}),e.jsxs(y,{value:n.datos_musicales.modality,onValueChange:s=>p(i,"datos_musicales.modality",s),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione una modalidad"})}),e.jsx(S,{children:Object.entries(Y).filter(([s])=>s!=="").map(([s,t])=>e.jsx(m,{value:s,children:t},s))})]}),e.jsx(c,{message:r[`estudiantes.${i}.datos_musicales.modality`]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Nivel a inscribirse *"}),e.jsx(x,{type:"number",min:"1",max:"10",value:n.datos_musicales.current_level,onChange:s=>p(i,"datos_musicales.current_level",parseInt(s.target.value)||1)}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Si es principiante, deja el nivel en 1"}),e.jsx(c,{message:r[`estudiantes.${i}.datos_musicales.current_level`]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Programa Acad√©mico"}),e.jsxs("div",{children:[e.jsx(l,{children:"Programa Acad√©mico *"}),e.jsxs(y,{value:n.program_id,onValueChange:s=>p(i,"program_id",s),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione un programa"})}),e.jsx(S,{children:h.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(c,{message:r[`estudiantes.${i}.program_id`]})]}),n.program_id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:h.find(s=>s.id.toString()===n.program_id)?.name}),e.jsx("p",{className:"text-sm text-gray-700",children:h.find(s=>s.id.toString()===n.program_id)?.description})]}),h.find(s=>s.id.toString()===n.program_id)?.schedules&&h.find(s=>s.id.toString()===n.program_id).schedules.length>0&&e.jsxs("div",{children:[e.jsx(l,{children:"Horario (Opcional)"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Selecciona un horario si deseas inscribirte en una clase espec√≠fica"}),e.jsxs(y,{value:n.schedule_id||void 0,onValueChange:s=>p(i,"schedule_id",s||""),children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Seleccione un horario (opcional)"})}),e.jsx(S,{children:h.find(s=>s.id.toString()===n.program_id).schedules.filter(s=>s.has_capacity).map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.days_of_week," | ",s.start_time," -"," ",s.end_time," | Prof. ",s.professor.name," | Cupos:"," ",s.available_slots]},s.id))})]})]})]})]})]})]})]});case 4:return e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:"Autorizaciones y Compromiso"}),e.jsx(M,{children:"Lea y acepte los t√©rminos antes de completar la matr√≠cula"})]}),e.jsxs(I,{className:"space-y-6",children:[a.is_minor&&e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Autorizaci√≥n para Menores de Edad"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Por medio de la presente doy la autorizaci√≥n a ",a.estudiantes.length>1?"mis hijos":"mi hijo(a)"," ","para que ",a.estudiantes.length>1?"estudien y desarrollen":"estudie y desarrolle"," en la Academia de formaci√≥n Musical y Espiritual LINAJE. Estoy de acuerdo en la completa aplicaci√≥n del reglamento de la academia."]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Estudiantes a matricular:"}),a.estudiantes.map((s,t)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded text-sm",children:[e.jsx("p",{children:e.jsxs("strong",{children:[s.name," ",s.last_name]})}),e.jsxs("p",{className:"text-gray-600",children:["Programa: ",h.find(u=>u.id.toString()===s.program_id)?.name||"No seleccionado"]}),e.jsxs("p",{className:"text-gray-600",children:["Modalidad: ",s.datos_musicales.modality]})]},t))]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(Q,{id:"parental_authorization",checked:a.parental_authorization,onCheckedChange:s=>o("parental_authorization",s)}),e.jsx(l,{htmlFor:"parental_authorization",className:"text-sm font-medium",children:"Acepto y autorizo como responsable legal"})]}),r.parental_authorization&&e.jsx("p",{className:"text-sm text-red-600",children:r.parental_authorization})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Compromiso de Pago"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["La Academia de formaci√≥n Musical y Espiritual LINAJE, desea tener constancia del compromiso de pago que hace usted como ",a.is_minor?"padre, madre o encargado de los estudiantes menores de edad":"estudiante inscrito",". Este compromiso se extiende desde que el estudiante es aceptado hasta que el mismo termina el programa escogido o decide no continuar con sus estudios en la Academia."]}),e.jsx("p",{className:"text-sm text-gray-700",children:"Mediante este documento usted deja constado todo lo que involucra en los Pagos de Inscripciones y Matr√≠culas. Enti√©ndase que en caso de que una de las partes no cumpla con dicho acuerdo, es usted quien tiene la responsabilidad final de los pagos con la Academia."}),a.is_minor&&a.estudiantes.length>0&&e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Resumen de matr√≠culas:"}),a.estudiantes.map((s,t)=>e.jsx("div",{className:"text-sm p-2 bg-gray-50 rounded",children:e.jsxs("p",{children:[e.jsxs("strong",{children:[s.name," ",s.last_name]})," - ",s.datos_musicales.modality," -"," ",h.find(u=>u.id.toString()===s.program_id)?.name]})},t))]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(Q,{id:"payment_commitment",checked:a.payment_commitment,onCheckedChange:s=>o("payment_commitment",s)}),e.jsxs(l,{htmlFor:"payment_commitment",className:"text-sm font-medium",children:["Acepto el compromiso de pago para ",a.is_minor?"todos los estudiantes":"la matr√≠cula"]})]}),r.payment_commitment&&e.jsx("p",{className:"text-sm text-red-600",children:r.payment_commitment})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-center",children:[e.jsx(W,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-lg font-semibold text-green-900",children:"¬°Todo listo!"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:'Haz clic en "Completar Matr√≠cula" para finalizar el proceso'})]})]})]});default:return null}};return console.log("üé® Renderizando con errores:",Object.keys(r).length,r),e.jsxs(e.Fragment,{children:[e.jsx(oe,{title:"Matr√≠cula - Academia Linaje"}),e.jsx(de,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Formato de Ingreso"}),e.jsx("p",{className:"text-gray-600",children:"Academia de Formaci√≥n Musical y Espiritual LINAJE"})]}),Object.keys(r).length>0&&e.jsx(F,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(U,{className:"h-5 w-5 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-red-900 mb-1",children:"Por favor revisa la informaci√≥n del formulario"}),e.jsxs("p",{className:"text-sm text-red-700 mb-3",children:["Se encontraron ",Object.keys(r).length," ",Object.keys(r).length===1?"error":"errores"," que deben ser corregidos:"]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-red-200",children:e.jsxs("ul",{className:"space-y-1.5",children:[Object.entries(r).slice(0,8).map(([n,s])=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"‚Ä¢"}),e.jsx("span",{children:s})]},n)),Object.keys(r).length>8&&e.jsxs("li",{className:"text-sm text-red-600 font-medium mt-2 pl-4",children:["... y ",Object.keys(r).length-8," ",Object.keys(r).length-8===1?"error m√°s":"errores m√°s"]})]})}),e.jsxs("p",{className:"text-xs text-red-600 mt-3 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Los campos con errores est√°n marcados en rojo debajo"]})]})]})})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-between mb-4",children:[1,2,3,4].map(n=>{const s=n<d||n===d&&E(n),t=n===d,u=n<d;return e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsxs("div",{className:"relative flex flex-col items-center flex-1",children:[e.jsx("button",{type:"button",onClick:()=>ae(n),disabled:n>d,className:k("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all duration-300 relative z-10",t&&"ring-4 ring-amber-200 scale-110",u&&"bg-green-600 text-white hover:bg-green-700",t&&s&&"bg-amber-600 text-white",t&&!s&&"bg-amber-400 text-white",!t&&!u&&"bg-gray-200 text-gray-500",n<=d&&"cursor-pointer",n>d&&"cursor-not-allowed"),children:u?e.jsx(L,{className:"h-5 w-5"}):e.jsx("span",{children:n})}),e.jsxs("span",{className:k("text-xs mt-2 text-center font-medium transition-colors",t?"text-amber-600":"text-gray-500"),children:[n===1&&"Responsable",n===2&&"Ubicaci√≥n",n===3&&"Estudiantes",n===4&&"Finalizar"]})]}),n<4&&e.jsx("div",{className:k("flex-1 h-1 mx-2 rounded transition-all duration-300",n<d?"bg-green-600":"bg-gray-200")})]},n)})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Paso ",d," de ",D,E(d)&&e.jsxs("span",{className:"ml-2 text-green-600 inline-flex items-center gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),"Completado"]})]})})]}),e.jsxs("form",{onSubmit:re,children:[ne(),e.jsxs("div",{className:"flex justify-between items-center mt-6 gap-4",children:[d>1&&e.jsxs(V,{type:"button",onClick:se,variant:"outline",size:"lg",className:"gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Anterior"]}),d===1&&e.jsx("div",{}),d<D&&e.jsxs("div",{className:"ml-auto flex flex-col items-end gap-2",children:[!E(d)&&e.jsxs("p",{className:"text-sm text-amber-600 flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),"Completa los campos requeridos"]}),e.jsxs(V,{type:"button",onClick:ee,disabled:!E(d),size:"lg",className:"gap-2",children:["Siguiente",e.jsx(pe,{className:"h-4 w-4"})]})]}),d===D&&e.jsxs("div",{className:"ml-auto flex flex-col items-end gap-2",children:[!E(d)&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),"Debes aceptar los compromisos"]}),e.jsx(V,{type:"submit",disabled:J||!E(d),size:"lg",className:"bg-green-600 hover:bg-green-700 gap-2 min-w-[200px]",children:J?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5"}),"Completar Matr√≠cula"]})})]})]})]})]})})]})}export{Ke as default};
