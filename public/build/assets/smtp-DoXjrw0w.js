import{r as m,j as e,H as O,F as G,a as $}from"./app-QjllIqwk.js";import{q as P}from"./wayfinder-FFrBTblC.js";import{a as K,S as W,H as F}from"./layout-B83-EIpt.js";import{I as h}from"./input-error-Dc7hwUka.js";import{u as I,c as q,B as H}from"./index-BFA9Bplt.js";import{I as f}from"./input-BXS_zqEc.js";import{L as p}from"./label-DKX6tYzQ.js";import{S as X,a as J,b as Y,c as Z,d as _}from"./select-UU15lE6B.js";import{u as ee,i as te,k as re,l as ae,m as se}from"./app-header-CWuHpmL8.js";import{P as M}from"./index-DKvKpAxG.js";import{A as oe}from"./app-layout-iRbbHkwd.js";import{M as ie}from"./mail-KDClVQHr.js";import{S as ne}from"./send-CKitiqRp.js";import"./app-uf1sLDQ0.js";import"./heading-m8rWKFIL.js";import"./toaster-DIwTLtsl.js";import"./index-CGinIBRf.js";import"./index-CcE2XHjo.js";import"./check-oC2N1d7R.js";import"./createLucideIcon-C658OA5U.js";import"./index-YEfPdCwI.js";import"./lock-Op8pONY4.js";import"./shield-C5Mfm-Us.js";import"./music-g5_Fbahd.js";const s=t=>({url:s.url(t),method:"get"});s.definition={methods:["get","head"],url:"/settings/smtp"};s.url=t=>s.definition.url+P(t);s.get=t=>({url:s.url(t),method:"get"});s.head=t=>({url:s.url(t),method:"head"});const E=t=>({action:s.url(t),method:"get"});E.get=t=>({action:s.url(t),method:"get"});E.head=t=>({action:s.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});s.form=E;const l=t=>({url:l.url(t),method:"patch"});l.definition={methods:["patch"],url:"/settings/smtp"};l.url=t=>l.definition.url+P(t);l.patch=t=>({url:l.url(t),method:"patch"});const R=t=>({action:l.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});R.patch=t=>({action:l.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});l.form=R;const u=t=>({url:u.url(t),method:"post"});u.definition={methods:["post"],url:"/settings/smtp/test"};u.url=t=>u.definition.url+P(t);u.post=t=>({url:u.url(t),method:"post"});const A=t=>({action:u.url(t),method:"post"});A.post=t=>({action:u.url(t),method:"post"});u.form=A;const le={update:l};var N="Switch",[ce,Ve]=te(N),[de,me]=ce(N),B=m.forwardRef((t,a)=>{const{__scopeSwitch:o,name:c,checked:i,defaultChecked:g,required:n,disabled:r,value:x="on",onCheckedChange:j,form:d,...w}=t,[b,v]=m.useState(null),k=I(a,S=>v(S)),C=m.useRef(!1),T=b?d||!!b.closest("form"):!0,[y,z]=ee({prop:i,defaultProp:g??!1,onChange:j,caller:N});return e.jsxs(de,{scope:o,checked:y,disabled:r,children:[e.jsx(M.button,{type:"button",role:"switch","aria-checked":y,"aria-required":n,"data-state":U(y),"data-disabled":r?"":void 0,disabled:r,value:x,...w,ref:k,onClick:re(t.onClick,S=>{z(D=>!D),T&&(C.current=S.isPropagationStopped(),C.current||S.stopPropagation())})}),T&&e.jsx(V,{control:b,bubbles:!C.current,name:c,value:x,checked:y,required:n,disabled:r,form:d,style:{transform:"translateX(-100%)"}})]})});B.displayName=N;var Q="SwitchThumb",L=m.forwardRef((t,a)=>{const{__scopeSwitch:o,...c}=t,i=me(Q,o);return e.jsx(M.span,{"data-state":U(i.checked),"data-disabled":i.disabled?"":void 0,...c,ref:a})});L.displayName=Q;var ue="SwitchBubbleInput",V=m.forwardRef(({__scopeSwitch:t,control:a,checked:o,bubbles:c=!0,...i},g)=>{const n=m.useRef(null),r=I(n,g),x=ae(o),j=se(a);return m.useEffect(()=>{const d=n.current;if(!d)return;const w=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(w,"checked").set;if(x!==o&&v){const k=new Event("click",{bubbles:c});v.call(d,o),d.dispatchEvent(k)}},[x,o,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...i,tabIndex:-1,ref:r,style:{...i.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});V.displayName=ue;function U(t){return t?"checked":"unchecked"}var pe=B,he=L;function fe({className:t,...a}){return e.jsx(pe,{"data-slot":"switch",className:q("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(he,{"data-slot":"switch-thumb",className:q("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const xe=[{title:"Configuración SMTP",href:K().url}];function Ue({smtpSetting:t}){const[a,o]=m.useState(""),[c,i]=m.useState(!1),g=()=>{a&&(i(!0),$.post("/settings/smtp/test",{email:a},{onFinish:()=>i(!1)}))};return e.jsxs(oe,{breadcrumbs:xe,children:[e.jsx(O,{title:"Configuración SMTP"}),e.jsx(W,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(F,{title:"Servidor SMTP",description:"Configura el servidor SMTP para enviar correos electrónicos desde la aplicación"}),e.jsx(G,{...le.update.form(),options:{preserveScroll:!0},className:"space-y-6",children:({processing:n,errors:r,data:x,setData:j})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"host",children:"Host del servidor SMTP"}),e.jsx(f,{id:"host",name:"host",type:"text",className:"mt-1 block w-full",defaultValue:t?.host??"",placeholder:"smtp.gmail.com",required:!0}),e.jsx(h,{className:"mt-2",message:r.host})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"port",children:"Puerto"}),e.jsx(f,{id:"port",name:"port",type:"number",className:"mt-1 block w-full",defaultValue:t?.port??587,placeholder:"587",required:!0}),e.jsx(h,{className:"mt-2",message:r.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"encryption",children:"Encriptación"}),e.jsxs(X,{name:"encryption",defaultValue:t?.encryption??"tls",onValueChange:d=>j("encryption",d==="none"?"":d),children:[e.jsx(J,{className:"w-full",children:e.jsx(Y,{placeholder:"Seleccionar encriptación"})}),e.jsxs(Z,{children:[e.jsx(_,{value:"tls",children:"TLS"}),e.jsx(_,{value:"ssl",children:"SSL"}),e.jsx(_,{value:"none",children:"Ninguna"})]})]}),e.jsx(h,{className:"mt-2",message:r.encryption})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"username",children:"Usuario / Correo"}),e.jsx(f,{id:"username",name:"username",type:"text",className:"mt-1 block w-full",defaultValue:t?.username??"",placeholder:"usuario@dominio.com"}),e.jsx(h,{className:"mt-2",message:r.username})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"password",children:"Contraseña"}),e.jsx(f,{id:"password",name:"password",type:"password",className:"mt-1 block w-full",placeholder:"••••••••"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Deja en blanco para mantener la contraseña actual"}),e.jsx(h,{className:"mt-2",message:r.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"from_address",children:"Correo de remitente"}),e.jsx(f,{id:"from_address",name:"from_address",type:"email",className:"mt-1 block w-full",defaultValue:t?.from_address??"",placeholder:"noreply@dominio.com",required:!0}),e.jsx(h,{className:"mt-2",message:r.from_address})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"from_name",children:"Nombre de remitente"}),e.jsx(f,{id:"from_name",name:"from_name",type:"text",className:"mt-1 block w-full",defaultValue:t?.from_name??"",placeholder:"KAIROS",required:!0}),e.jsx(h,{className:"mt-2",message:r.from_name})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(p,{htmlFor:"is_active",children:"Configuración activa"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Habilita esta configuración para enviar correos"})]}),e.jsx(fe,{id:"is_active",name:"is_active",defaultChecked:t?.is_active??!0})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(H,{type:"submit",disabled:n,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),n?"Guardando...":"Guardar Configuración"]})})]})}),t&&e.jsxs("div",{className:"rounded-lg border p-6 space-y-4",children:[e.jsx(F,{title:"Probar configuración",description:"Envía un correo de prueba para verificar que la configuración funciona correctamente"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{type:"email",placeholder:"correo@ejemplo.com",value:a,onChange:n=>o(n.target.value),className:"max-w-sm"}),e.jsxs(H,{type:"button",variant:"outline",onClick:g,disabled:!a||c,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),c?"Enviando...":"Enviar Prueba"]})]})]})]})})]})}export{Ue as default};
