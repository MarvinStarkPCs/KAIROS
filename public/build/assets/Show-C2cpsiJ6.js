import{j as e,H as h,L as i}from"./app-_rOQn_46.js";import{B as g}from"./button-Cwjg0RKq.js";import{A as f}from"./app-layout-CLhCFhGY.js";import{C as n}from"./circle-x-C2egA9mx.js";import{C as j}from"./clock-92yNzH6p.js";import{C as p}from"./circle-check-big-DVR_8QDl.js";import{A as N}from"./arrow-left-BFNy3nN-.js";import{S as b}from"./square-pen-BEwHn1Qv.js";import{D as v}from"./dollar-sign-BmLGpF_l.js";import{U as w}from"./user-C5Kq0LMs.js";import{F as _}from"./file-text-CqZet-U8.js";import{B as C}from"./book-open-d3nfV-Db.js";import{C as P}from"./calendar-DwYwQP4N.js";import{R as S}from"./receipt-Dg-f9CSE.js";/* empty css            */import"./utils-CHYGzkwl.js";import"./index-HbNiKBAr.js";import"./index-kZXzX9CC.js";import"./index-C0WYYgI1.js";import"./createLucideIcon-BTUecZaa.js";import"./index-DhMGY2fr.js";import"./index-LDKjRhno.js";import"./index-86eqSqYr.js";import"./app-header-uhUDMoS0.js";import"./chevron-right-KvpbVvzH.js";import"./index-B4ow9L1E.js";import"./index-CLa6oRL-.js";import"./wayfinder-Bf9OnZdi.js";import"./index-D12nj1Ca.js";import"./graduation-cap-h2z_kizA.js";import"./users-CU2UoBYp.js";import"./credit-card-CtYZ3YyT.js";import"./lock-BoKNE-VZ.js";import"./shield-DI4dg6mj.js";import"./chevron-down-gmsC21Id.js";import"./loader-circle-eUOhA3c_.js";import"./mail-DuzhTNEq.js";import"./toaster-DF114ULM.js";const l={cash:"Efectivo",transfer:"Transferencia",credit_card:"Tarjeta de Crédito",manual:"Manual"},m={completed:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",label:"Completado",icon:p},pending:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-400",label:"Pendiente",icon:j},overdue:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",label:"Vencido",icon:n},cancelled:{bg:"bg-muted",text:"text-muted-foreground",label:"Cancelado",icon:n}},D={single:"Pago Único",partial:"Abonos Parciales",installment:"Cuotas"};function xe({payment:s}){const r=s.original_amount??s.amount,o=s.paid_amount??0,c=s.pending_balance??s.remaining_amount??r,a=r>0?Math.min(o/r*100,100):0,d=m[s.status]??m.pending,x=d.icon;return e.jsxs(f,{children:[e.jsx(h,{title:`Pago #${s.id}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(i,{href:"/pagos",className:"mb-2 flex items-center text-sm text-muted-foreground hover:text-foreground",children:[e.jsx(N,{className:"mr-1 h-4 w-4"}),"Volver a pagos"]}),e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Detalle de Pago #",s.id]})]}),e.jsx(i,{href:`/pagos/${s.id}/edit`,children:e.jsxs(g,{children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Editar"]})})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[e.jsx(v,{className:"h-5 w-5 text-green-600"}),"Resumen Financiero"]}),e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-sm font-medium ${d.bg} ${d.text}`,children:[e.jsx(x,{className:"h-4 w-4"}),d.label]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progreso de pago"}),e.jsxs("span",{className:"font-medium text-foreground",children:[a.toFixed(0),"%"]})]}),e.jsx("div",{className:"mt-2 h-3 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${s.status==="completed"?"bg-green-500":"bg-blue-500"}`,style:{width:`${a}%`}})}),e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsxs("div",{className:"text-lg font-bold text-foreground",children:["$",r.toLocaleString("es-CO")]})]}),e.jsxs("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pagado"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",o.toLocaleString("es-CO")]})]}),e.jsxs("div",{className:"rounded-lg bg-orange-50 dark:bg-orange-900/20 p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pendiente"}),e.jsxs("div",{className:"text-lg font-bold text-orange-600",children:["$",c.toLocaleString("es-CO")]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase text-muted-foreground",children:[e.jsx(w,{className:"h-4 w-4"}),"Estudiante"]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nombre"}),e.jsxs("div",{className:"font-medium text-foreground",children:[s.student.name," ",s.student.last_name??""]})]}),s.student.document_number&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Documento"}),e.jsx("div",{className:"font-medium text-foreground",children:s.student.document_number})]}),s.student.email&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("div",{className:"font-medium text-foreground",children:s.student.email})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase text-muted-foreground",children:[e.jsx(_,{className:"h-4 w-4"}),"Detalles del Pago"]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Concepto"}),e.jsx("div",{className:"font-medium text-foreground",children:s.concept})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tipo"}),e.jsx("div",{className:"font-medium text-foreground",children:D[s.payment_type]??s.payment_type})]}),s.payment_method&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Método de Pago"}),e.jsx("div",{className:"font-medium text-foreground",children:l[s.payment_method]??s.payment_method})]}),s.reference_number&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Referencia"}),e.jsx("div",{className:"font-medium text-foreground",children:s.reference_number})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase text-muted-foreground",children:[e.jsx(C,{className:"h-4 w-4"}),"Programa y Matrícula"]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[s.program&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Programa"}),e.jsx("div",{className:"font-medium text-foreground",children:s.program.name})]}),s.enrollment&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Estado Matrícula"}),e.jsx("div",{className:"font-medium text-foreground capitalize",children:s.enrollment.status})]}),s.wompi_reference&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Referencia Wompi"}),e.jsx("div",{className:"font-mono text-sm text-foreground",children:s.wompi_reference})]}),s.wompi_transaction_id&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transacción Wompi"}),e.jsx("div",{className:"font-mono text-sm text-foreground",children:s.wompi_transaction_id})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),"Fechas"]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fecha de Vencimiento"}),e.jsx("div",{className:"font-medium text-foreground",children:new Date(s.due_date).toLocaleDateString("es-CO")})]}),s.payment_date&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fecha de Pago"}),e.jsx("div",{className:"font-medium text-foreground",children:new Date(s.payment_date).toLocaleDateString("es-CO")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fecha de Registro"}),e.jsx("div",{className:"font-medium text-foreground",children:new Date(s.created_at).toLocaleDateString("es-CO")})]}),s.recorded_by&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Registrado por"}),e.jsx("div",{className:"font-medium text-foreground",children:s.recorded_by.name})]})]})]})]}),s.notes&&e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-muted-foreground",children:"Notas"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:s.notes})]}),s.transactions&&s.transactions.length>0&&e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[e.jsx(S,{className:"h-5 w-5 text-purple-600"}),"Historial de Abonos (",s.transactions.length,")"]}),e.jsx("div",{className:"mt-4 overflow-hidden rounded-lg border border-border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Método"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Referencia"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Registrado por"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-muted-foreground",children:"Notas"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:s.transactions.map((t,u)=>e.jsxs("tr",{className:"hover:bg-muted",children:[e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:u+1}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:new Date(t.created_at).toLocaleDateString("es-CO")}),e.jsxs("td",{className:"px-4 py-3 font-semibold text-green-700 dark:text-green-300",children:["$",Number(t.amount).toLocaleString("es-CO")]}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:l[t.payment_method]??t.payment_method}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:t.reference_number||"—"}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:t.recorded_by?.name||"—"}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:t.notes||"—"})]},t.id))})]})})]})]})]})}export{xe as default};
