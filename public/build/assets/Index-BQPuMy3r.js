import{b as g,r as d,j as e,H as b,L as f,a as N}from"./app-qFfT3Kyz.js";import{B as m}from"./button-FCygCcsH.js";import{X as y}from"./app-header-DHkVQoEm.js";import{T as C,a as v,b as u,c as n,d as D,e as i,P as A}from"./table-DHJ1Rjuf.js";import{B as T}from"./badge-CxetVomE.js";import{T as w,A as E,a as S,b as U,c as k,d as B,e as H}from"./alert-dialog-Cd23JB2P.js";import{C as L,a as P,b as I,d as R,c as _}from"./card-BPhQHP4_.js";import{s as c}from"./index-ikzcNs2d.js";import{A as z}from"./app-layout-DsfJY00R.js";import{P as G}from"./plus-ClpZ0Bft.js";import"./app-DvueXQPM.js";import"./createLucideIcon-BPoSiW7Y.js";import"./index-DxWTR7dz.js";import"./index-DxJPmfU5.js";import"./index-CMWG4mbA.js";import"./music-D4VJS4bg.js";import"./mail-C3w4vEKl.js";import"./lock-DoyoJIuQ.js";import"./shield-O3yU6Doc.js";function q(){const{props:r}=g(),[l,t]=d.useState(!1),a=r.flash;if(d.useEffect(()=>{if(a?.success||a?.error){t(!0);const h=setTimeout(()=>t(!1),5e3);return()=>clearTimeout(h)}},[a]),!l||!a)return null;const o=!!a.success,x=a.success||a.error;return e.jsxs("div",{className:`fixed top-4 right-4 p-4 rounded-lg flex items-center gap-3 ${o?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{children:x}),e.jsx("button",{onClick:()=>t(!1),title:"Close alert","aria-label":"Close alert",children:e.jsx(y,{className:"w-4 h-4"})})]})}function ne({users:r}){const[l,t]=d.useState(null),[a,o]=d.useState(!1),x=[{title:"Dashboard",href:c("dashboard")},{title:"Usuarios",href:c("usuarios.index")}],h=async()=>{l&&(o(!0),N.delete(c("usuarios.destroy",l),{onFinish:()=>{o(!1),t(null)}}))},p=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(z,{breadcrumbs:x,children:[e.jsx(q,{}),e.jsx(b,{title:"Gestión de Usuarios"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6 bg-[#f9f6f2]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-800",children:"Usuarios del Sistema"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona los usuarios y sus roles"})]}),e.jsx(f,{href:c("usuarios.create"),children:e.jsxs(m,{className:"bg-[#7a9b3c] hover:bg-[#6a8a2c]",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Nuevo Usuario"]})})]}),e.jsxs(L,{className:"shadow-md",children:[e.jsxs(P,{children:[e.jsx(I,{children:"Lista de Usuarios"}),e.jsxs(R,{children:[r.length," usuario",r.length!==1?"s":""," registrado",r.length!==1?"s":""]})]}),e.jsx(_,{children:e.jsxs(C,{children:[e.jsx(v,{children:e.jsxs(u,{children:[e.jsx(n,{children:"Usuario"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Roles"}),e.jsx(n,{children:"Registrado"}),e.jsx(n,{className:"text-right",children:"Acciones"})]})}),e.jsx(D,{children:r.length>0?r.map(s=>e.jsxs(u,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-[#7a9b3c] flex items-center justify-center text-white text-sm font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsx("span",{children:s.name})]})}),e.jsx(i,{className:"text-gray-600",children:s.email}),e.jsx(i,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles.length>0?s.roles.map(j=>e.jsx(T,{variant:"secondary",children:j.name},j.id)):e.jsx("span",{className:"text-xs text-gray-500",children:"Sin roles"})})}),e.jsx(i,{className:"text-gray-600",children:p(s.created_at)}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(f,{href:c("usuarios.edit",s.id),children:e.jsx(m,{variant:"ghost",size:"sm",children:e.jsx(A,{className:"h-4 w-4"})})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>t(s.id),children:e.jsx(w,{className:"h-4 w-4 text-red-600"})})]})})]},s.id)):e.jsx(u,{children:e.jsx(i,{colSpan:5,className:"text-center py-6 text-gray-500",children:"No hay usuarios registrados."})})})]})})]})]}),e.jsx(E,{open:l!==null,onOpenChange:()=>t(null),children:e.jsxs(S,{children:[e.jsx(U,{children:"Eliminar Usuario"}),e.jsx(k,{children:"¿Estás seguro de que deseas eliminar este usuario? Esta acción no se puede deshacer."}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(B,{children:"Cancelar"}),e.jsx(H,{onClick:h,disabled:a,className:"bg-red-600 hover:bg-red-700",children:a?"Eliminando...":"Eliminar"})]})]})})]})}export{ne as default};
