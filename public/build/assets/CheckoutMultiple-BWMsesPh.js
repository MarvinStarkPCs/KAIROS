import{r as d,j as e,H as k}from"./app-DS3XsqEZ.js";import{C as o,b as x,c as u,a as m,d as f}from"./card-CSV1cHqY.js";import{B as M}from"./button-B1e-AMvH.js";import{c as T}from"./utils-CXgVrZ_A.js";import{T as E}from"./toaster-B63BtNr_.js";import{U as I}from"./users-D0n3l_ee.js";import{C as N}from"./circle-check-big-DqBP3iFw.js";import{C as L}from"./credit-card-CG29_pKq.js";import{L as v}from"./loader-circle-BegcMASd.js";/* empty css            */import"./index-C1zl3AKF.js";import"./index-CNXn2kmk.js";import"./createLucideIcon-CDm0GSF8.js";function U({payments:i,totalAmount:y,wompiPublicKey:g,redirectUrl:p}){const[r,C]=d.useState(0),[c,w]=d.useState([]),[P,h]=d.useState(!1),t=i[r];d.useEffect(()=>{if(!t||c.includes(t.id))return;const a=document.querySelector('script[src*="checkout.wompi"]');a&&a.remove();const n=document.getElementById("wompi-widget");n&&(n.innerHTML="");const s=document.createElement("script");return s.src="https://checkout.wompi.co/widget.js",s.async=!0,s.setAttribute("data-render","button"),s.setAttribute("data-public-key",g),s.setAttribute("data-currency","COP"),s.setAttribute("data-amount-in-cents",t.amountInCents.toString()),s.setAttribute("data-reference",t.wompi_reference),t.integritySignature&&s.setAttribute("data-signature:integrity",t.integritySignature),s.setAttribute("data-redirect-url",p),s.setAttribute("data-customer-data:email",t.student.email),s.setAttribute("data-customer-data:full-name",`${t.student.name} ${t.student.last_name}`),s.setAttribute("data-acceptance-token","true"),s.setAttribute("data-payment-methods-enabled","CARD"),s.onload=()=>{h(!1),console.log("Wompi widget cargado para:",t.student.name);const l=setInterval(()=>{const b=document.querySelector('form[action*="checkout.wompi"] button');b&&(clearInterval(l),setTimeout(()=>b.click(),500))},200);setTimeout(()=>clearInterval(l),3e3)},n&&n.appendChild(s),()=>{n&&s.parentNode===n&&n.removeChild(s)}},[r,t,g,p,c]);const A=()=>{t&&!c.includes(t.id)&&w(a=>[...a,t.id]),r<i.length-1&&(h(!0),C(r+1),window.scrollTo({top:0,behavior:"smooth"}))},S=()=>{A()},j=(r+1)/i.length*100;return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Pagar Matr√≠culas"}),e.jsx(E,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"¬°Matr√≠culas Creadas Exitosamente!"}),e.jsx("p",{className:"text-gray-600",children:"Procede con el pago de cada matr√≠cula para completar el proceso"}),e.jsxs("div",{className:"mt-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[e.jsxs("span",{children:["Pago ",r+1," de ",i.length]}),e.jsxs("span",{children:[Math.round(j),"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-500",style:{width:`${j}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(o,{className:"sticky top-6",children:[e.jsx(x,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Estudiantes (",i.length,")"]})}),e.jsxs(m,{className:"space-y-2",children:[i.map((a,n)=>{const s=n===r,l=c.includes(a.id);return e.jsx("div",{className:T("p-4 rounded-lg border-2 transition-all",s&&"border-amber-500 bg-amber-50 shadow-md",l&&"border-green-500 bg-green-50",!s&&!l&&"border-gray-200 bg-white"),children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l&&e.jsx(N,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),s&&!l&&e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-amber-500 border-t-transparent animate-spin flex-shrink-0"}),e.jsxs("p",{className:"font-semibold text-sm truncate",children:[a.student.name," ",a.student.last_name]})]}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:a.program.name}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:["$",a.amount.toLocaleString("es-CO")]})]})})},a.id)}),e.jsx("div",{className:"pt-4 border-t-2 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:["$",y.toLocaleString("es-CO")," COP"]})]})})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(o,{children:[e.jsxs(x,{className:"bg-gradient-to-r from-amber-50 to-orange-50",children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Pagar Matr√≠cula ",r+1]}),e.jsxs(f,{children:[t.student.name," ",t.student.last_name]})]}),e.jsxs(m,{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold",children:[t.student.name," ",t.student.last_name]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Programa"}),e.jsx("p",{className:"font-semibold",children:t.program.name})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg text-white text-center",children:[e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Monto a Pagar"}),e.jsxs("p",{className:"text-4xl font-bold",children:["$",t.amount.toLocaleString("es-CO")]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"COP"})]})]})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(u,{children:"M√©todo de Pago"}),e.jsx(f,{children:"Paga de forma segura con tarjeta de cr√©dito o d√©bito"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"üí≥ Cobro Autom√°tico Mensual:"})," Al registrar tu tarjeta, se configurar√°n pagos autom√°ticos mensuales para todas las matr√≠culas."]})}),e.jsx("div",{id:"wompi-widget",className:"flex justify-center py-8",children:P?e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(v,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Cargando pasarela de pago..."})]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(v,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Abriendo pasarela de pago..."})]})}),r<i.length-1&&e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"¬øPrefieres pagar este despu√©s?"}),e.jsx(M,{type:"button",variant:"outline",onClick:S,className:"w-full",children:"Saltar y pagar siguiente estudiante"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pago seguro procesado por Wompi"})]})})]})]}),e.jsx(o,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-6 w-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"¬øQu√© pasa despu√©s del pago?"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"‚úì Recibir√°s confirmaci√≥n por email"}),e.jsx("li",{children:"‚úì Se activar√°n las matr√≠culas pagadas"}),e.jsx("li",{children:"‚úì Podr√°s acceder al panel de estudiante"}),e.jsx("li",{children:"‚úì Los pagos mensuales se procesar√°n autom√°ticamente"})]})]})]})})})]})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-amber-600 hover:underline font-medium",children:"Cont√°ctanos"})]})})]})})]})}export{U as default};
