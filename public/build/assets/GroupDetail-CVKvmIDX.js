import{r as u,j as e,H as z,L as k,a as H}from"./app-CbdkfHJ1.js";import{A as O}from"./app-layout-UeK7zdys.js";import{c as f,B as h}from"./index-DrKFha6I.js";import{C as j,a as N,b as y,d as C}from"./card-BD1ofcZv.js";import{B as w}from"./badge-LAqA3Lza.js";import{n as K,u as U,e as q,p as J,L as P,N as Q,Q as X,g as _,f as W,I as x,G as Y}from"./app-header-BRBw-s_s.js";import{P as b}from"./index-C7ckdyxK.js";import{C as Z}from"./clock-Dxa7MEbm.js";import{M as ee}from"./map-pin-CBcj7Uwl.js";import{U as ae}from"./users-DfVOsG9e.js";import{C as I}from"./circle-check-big-BTsiDWWG.js";import{C as se}from"./circle-alert-CHlJUm44.js";import{C as te}from"./circle-x-CsB8BC9v.js";import"./app-AMNGCD30.js";import"./toaster-DbHbh0qu.js";import"./createLucideIcon-BPEA0rdI.js";import"./index-YEfPdCwI.js";import"./wayfinder-FFrBTblC.js";import"./lock-CUIqvWag.js";import"./shield-Q-wRHoM9.js";import"./music-B1KB9q4U.js";import"./mail-CSjTxGT0.js";var v="Tabs",[re,Re]=q(v,[P]),E=P(),[ne,S]=re(v),D=u.forwardRef((s,t)=>{const{__scopeTabs:l,value:r,onValueChange:c,defaultValue:d,orientation:i="horizontal",dir:m,activationMode:p="automatic",...a}=s,n=K(m),[o,g]=U({prop:r,onChange:c,defaultProp:d??"",caller:v});return e.jsx(ne,{scope:l,baseId:J(),value:o,onValueChange:g,orientation:i,dir:n,activationMode:p,children:e.jsx(b.div,{dir:n,"data-orientation":i,...a,ref:t})})});D.displayName=v;var M="TabsList",R=u.forwardRef((s,t)=>{const{__scopeTabs:l,loop:r=!0,...c}=s,d=S(M,l),i=E(l);return e.jsx(Q,{asChild:!0,...i,orientation:d.orientation,dir:d.dir,loop:r,children:e.jsx(b.div,{role:"tablist","aria-orientation":d.orientation,...c,ref:t})})});R.displayName=M;var $="TabsTrigger",L=u.forwardRef((s,t)=>{const{__scopeTabs:l,value:r,disabled:c=!1,...d}=s,i=S($,l),m=E(l),p=V(i.baseId,r),a=B(i.baseId,r),n=r===i.value;return e.jsx(X,{asChild:!0,...m,focusable:!c,active:n,children:e.jsx(b.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":a,"data-state":n?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:p,...d,ref:t,onMouseDown:_(s.onMouseDown,o=>{!c&&o.button===0&&o.ctrlKey===!1?i.onValueChange(r):o.preventDefault()}),onKeyDown:_(s.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&i.onValueChange(r)}),onFocus:_(s.onFocus,()=>{const o=i.activationMode!=="manual";!n&&!c&&o&&i.onValueChange(r)})})})});L.displayName=$;var F="TabsContent",G=u.forwardRef((s,t)=>{const{__scopeTabs:l,value:r,forceMount:c,children:d,...i}=s,m=S(F,l),p=V(m.baseId,r),a=B(m.baseId,r),n=r===m.value,o=u.useRef(n);return u.useEffect(()=>{const g=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(W,{present:c||n,children:({present:g})=>e.jsx(b.div,{"data-state":n?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":p,hidden:!g,id:a,tabIndex:0,...i,ref:t,style:{...s.style,animationDuration:o.current?"0s":void 0},children:g&&d})})});G.displayName=F;function V(s,t){return`${s}-trigger-${t}`}function B(s,t){return`${s}-content-${t}`}var ie=D,oe=R,le=L,ce=G;function de({className:s,...t}){return e.jsx(ie,{"data-slot":"tabs",className:f("flex flex-col gap-2",s),...t})}function me({className:s,...t}){return e.jsx(oe,{"data-slot":"tabs-list",className:f("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function T({className:s,...t}){return e.jsx(le,{"data-slot":"tabs-trigger",className:f("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function A({className:s,...t}){return e.jsx(ce,{"data-slot":"tabs-content",className:f("flex-1 outline-none",s),...t})}const xe={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"};function $e({schedule:s,students:t,activities:l}){const[r,c]=u.useState({}),[d,i]=u.useState(new Date().toISOString().split("T")[0]),m=(a,n)=>{c(o=>({...o,[a]:n}))},p=()=>{const a=Object.entries(r).map(([n,o])=>({student_id:parseInt(n),status:o,notes:""}));if(a.length===0){alert("Debes marcar al menos un estudiante");return}H.post(`/profesor/grupo/${s.id}/asistencia`,{class_date:d,attendances:a})};return e.jsxs(O,{variant:"sidebar",title:`${s.program.name} - Portal Profesor`,children:[e.jsx(z,{title:`${s.program.name} - Portal Profesor`}),e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.program.name}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[e.jsx(w,{style:{backgroundColor:s.program.color},className:"text-white",children:xe[s.day_of_week]||s.day_of_week}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(x,{iconNode:Z,className:"w-4 h-4 mr-1"}),s.start_time," - ",s.end_time]}),s.location&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(x,{iconNode:ee,className:"w-4 h-4 mr-1"}),s.location]})]})]}),e.jsx(k,{href:"/profesor/mis-grupos",children:e.jsx(h,{variant:"outline",children:"Volver"})})]})}),e.jsxs(de,{defaultValue:"students",className:"space-y-6",children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsxs(T,{value:"students",children:[e.jsx(x,{iconNode:ae,className:"w-4 h-4 mr-2"}),"Estudiantes (",t.length,")"]}),e.jsxs(T,{value:"attendance",children:[e.jsx(x,{iconNode:I,className:"w-4 h-4 mr-2"}),"Marcar Asistencia"]}),e.jsxs(T,{value:"activities",children:[e.jsx(x,{iconNode:Y,className:"w-4 h-4 mr-2"}),"Actividades (",l.length,")"]})]}),e.jsx(A,{value:"students",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsx(y,{children:"Lista de Estudiantes"})}),e.jsx(C,{children:t.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay estudiantes inscritos en este grupo"}):e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Inscrito: ",new Date(a.enrollment_date).toLocaleDateString("es-ES")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[a.attendance_stats.percentage,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[a.attendance_stats.present,"P / ",a.attendance_stats.late,"T / ",a.attendance_stats.absent,"A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["de ",a.attendance_stats.total," clases"]})]})]},a.id))})})]})}),e.jsx(A,{value:"attendance",children:e.jsxs(j,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Marcar Asistencia del Día"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Clase"}),e.jsx("input",{type:"date",value:d,onChange:a=>i(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#7a9b3c]"})]})]}),e.jsx(C,{children:t.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay estudiantes para marcar asistencia"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:t.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{size:"sm",variant:r[a.id]==="present"?"default":"outline",onClick:()=>m(a.id,"present"),className:r[a.id]==="present"?"bg-green-600 hover:bg-green-700":"",children:[e.jsx(x,{iconNode:I,className:"w-4 h-4 mr-1"}),"Presente"]}),e.jsxs(h,{size:"sm",variant:r[a.id]==="late"?"default":"outline",onClick:()=>m(a.id,"late"),className:r[a.id]==="late"?"bg-orange-600 hover:bg-orange-700":"",children:[e.jsx(x,{iconNode:se,className:"w-4 h-4 mr-1"}),"Tarde"]}),e.jsxs(h,{size:"sm",variant:r[a.id]==="absent"?"default":"outline",onClick:()=>m(a.id,"absent"),className:r[a.id]==="absent"?"bg-red-600 hover:bg-red-700":"",children:[e.jsx(x,{iconNode:te,className:"w-4 h-4 mr-1"}),"Ausente"]})]})]},a.id))}),e.jsx(h,{onClick:p,className:"w-full bg-[#7a9b3c] hover:bg-[#6a8a2c]",disabled:Object.keys(r).length===0,children:"Guardar Asistencia"})]})})]})}),e.jsx(A,{value:"activities",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsx(y,{children:"Actividades para Evaluar"})}),e.jsx(C,{children:l.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay actividades configuradas para este programa"}):e.jsx("div",{className:"space-y-4",children:l.map(a=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(w,{variant:"outline",children:a.study_plan.module_name}),e.jsxs(w,{variant:"secondary",children:["Peso: ",a.weight,"%"]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Criterios de Evaluación:"}),e.jsx("ul",{className:"space-y-1",children:a.evaluation_criteria.map(n=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-[#7a9b3c] rounded-full mr-2"}),n.name," (",n.max_points," puntos)"]},n.id))})]}),e.jsx(k,{href:`/profesor/grupo/${s.id}/actividad/${a.id}/evaluar`,children:e.jsx(h,{className:"w-full bg-[#7a9b3c] hover:bg-[#6a8a2c]",children:"Evaluar Estudiantes"})})]},a.id))})})]})})]})]})]})}export{$e as default};
