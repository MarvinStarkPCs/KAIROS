import{r as g,j as e,H as v}from"./app-B-gf--_t.js";import{C as x,b,c as f,d as N,a as u}from"./card-CtCBZFLS.js";import{T as y}from"./toaster-B6w1HnuI.js";import{C}from"./circle-check-big-CCiSG9VS.js";import"./app-ByrExa3J.js";import"./utils-CBfrqCZ4.js";import"./index-ZKCUC6w_.js";import"./createLucideIcon-BKgpMFfl.js";function w({publicKey:a,amountInCents:t,reference:r,currency:i="COP",redirectUrl:n,customerEmail:h,customerName:d,integritySignature:o}){const c=g.useRef(null),p=(s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s:(console.warn("‚ö†Ô∏è Email inv√°lido detectado:",s),"noreply@academialinaje.com"))(h),m=a.startsWith("pub_test_");return g.useEffect(()=>{if(console.log("üîÑ Datos actualizados:",{publicKey:a,amountInCents:t,reference:r,currency:i,redirectUrl:n,customerEmail:h,customerName:d,integritySignature:o}),!c.current)return;const s=document.createElement("script");return s.src="https://checkout.wompi.co/widget.js",s.setAttribute("data-render","button"),s.setAttribute("data-public-key",a),s.setAttribute("data-currency",i),s.setAttribute("data-amount-in-cents",t.toString()),s.setAttribute("data-reference",r),s.setAttribute("data-redirect-url",n),s.setAttribute("data-customer-data:email",p),s.setAttribute("data-customer-data:full-name",d),o&&!m?(s.setAttribute("data-signature:integrity",o),console.log("üîê Modo PRODUCCI√ìN - Firma de integridad incluida")):m&&console.log("üß™ Modo TEST - Sin firma de integridad (opcional en sandbox)"),c.current.appendChild(s),s.onload=()=>{console.log("‚úÖ Script de Wompi cargado exitosamente"),setTimeout(()=>{const l=c.current?.querySelector("button");l?(console.log("üöÄ Abriendo widget de pago autom√°ticamente..."),l.click()):console.warn("‚ö†Ô∏è No se encontr√≥ el bot√≥n de Wompi")},1e3)},s.onerror=()=>{console.error("‚ùå Error al cargar el script de Wompi")},()=>{const l=c.current;if(l){const j=l.querySelector('script[src="https://checkout.wompi.co/widget.js"]');j&&l.removeChild(j)}}},[a,t,r,i,n,p,d,o,m]),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Pago Seguro con Wompi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haz clic en el bot√≥n de abajo para continuar"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",(t/100).toLocaleString("es-CO")," COP"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Referencia: ",r]})]})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("form",{ref:c})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Instrucciones de pago"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:'‚Ä¢ Haz clic en el bot√≥n "Pagar con Wompi"'}),e.jsx("li",{children:"‚Ä¢ Se abrir√° una ventana segura de Wompi"}),e.jsx("li",{children:"‚Ä¢ Elige tu m√©todo de pago (tarjeta, PSE, Nequi, etc.)"}),e.jsx("li",{children:"‚Ä¢ Completa la informaci√≥n requerida"}),e.jsx("li",{children:"‚Ä¢ Al finalizar, recibir√°s confirmaci√≥n de tu pago"})]})]})]})})})]})}function z({payment:a,wompi_config:t}){console.log("Wompi Config:",t);const r=`${a.student.name} ${a.student.last_name}`,i=a.student.email||"noreply@academialinaje.com",n=Math.round(a.amount*100);return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Pagar Matr√≠cula"}),e.jsx(y,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Completar Matr√≠cula"}),e.jsx("p",{className:"text-gray-600",children:"Solo falta un paso para completar tu matr√≠cula"})]}),e.jsxs(x,{className:"mb-6",children:[e.jsxs(b,{children:[e.jsx(f,{children:"Resumen de Pago"}),e.jsx(N,{children:"Revisa los detalles de tu matr√≠cula"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Estudiante:"}),e.jsx("span",{className:"font-medium",children:r})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Programa:"}),e.jsx("span",{className:"font-medium",children:a.program.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Concepto:"}),e.jsx("span",{className:"font-medium",children:a.concept})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Correo:"}),e.jsx("span",{className:"font-medium text-sm",children:i})]}),e.jsxs("div",{className:"flex justify-between py-3 bg-primary/5 px-4 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",a.amount.toLocaleString("es-CO")," COP"]})]})]})]}),e.jsx(x,{className:"mb-6",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Pagos Mensuales Autom√°ticos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Al proceder con el pago, configurar√°s una suscripci√≥n mensual autom√°tica. Tu tarjeta se cargar√° cada mes sin necesidad de realizar el pago manualmente."})]})]})})}),e.jsxs(x,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Proceder al Pago"}),e.jsx(N,{children:"Completa tu pago de forma segura con Wompi"})]}),e.jsx(u,{children:e.jsx(w,{publicKey:t.public_key,amountInCents:n,reference:a.wompi_reference,currency:"COP",redirectUrl:window.location.origin+"/matricula/confirmacion",customerEmail:i,customerName:r,integritySignature:t.integrity_signature})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"M√©todos de pago aceptados"}),e.jsxs("div",{className:"flex justify-center gap-4 items-center opacity-60",children:[e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"VISA"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"MASTERCARD"}),e.jsx("div",{className:"text-xs font-semibold bg-white px-3 py-1 rounded border",children:"PSE"})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["¬øTienes problemas con el pago?"," ",e.jsx("a",{href:"mailto:soporte@academialinaje.com",className:"text-primary hover:underline",children:"Cont√°ctanos"})]})})]})})]})}export{z as default};
